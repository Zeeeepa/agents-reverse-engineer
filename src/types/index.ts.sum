---
generated_at: 2026-02-09T21:30:17.808Z
content_hash: 38568303038b8592202e7cb3a10296983279d31d0297e87048561aa7d45cc41e
purpose: Defines core TypeScript interfaces for file discovery results, exclusion metadata, and discovery statistics shared ac...
---
**Defines core TypeScript interfaces for file discovery results, exclusion metadata, and discovery statistics shared across discovery and change-detection modules.**

## Exported Interfaces

**ExcludedFile** represents a filtered-out file with exclusion metadata:
- `path: string` — Absolute or relative path to the excluded file
- `reason: string` — Exclusion rationale string (e.g., "gitignore pattern", "binary file", "vendor directory")

**DiscoveryResult** encapsulates file discovery output consumed by generation orchestrators:
- `files: string[]` — File paths eligible for analysis (passed to Phase 1 worker pool)
- `excluded: ExcludedFile[]` — Files filtered out with reasons (used for statistics and reporting)

**DiscoveryStats** aggregates discovery metrics for progress reporting and telemetry:
- `totalFiles: number` — Sum of included and excluded files
- `includedFiles: number` — Count of files in `DiscoveryResult.files`
- `excludedFiles: number` — Count of files in `DiscoveryResult.excluded`
- `exclusionReasons: Record<string, number>` — Map of `ExcludedFile.reason` strings to occurrence counts

## Usage Patterns

`DiscoveryResult` is returned by `discoverFiles()` in `src/discovery/run.ts` and consumed by `generateDocumentation()` in `src/generation/orchestrator.ts`.

`DiscoveryStats` is computed from `DiscoveryResult` via reduction over `excluded[]` array to populate `exclusionReasons` histogram, then logged by `src/output/logger.ts` and written to `GENERATION-PLAN.md`.

`ExcludedFile` is produced by filter chain modules in `src/discovery/filters/` (gitignore.ts, binary.ts, vendor.ts, custom.ts) and aggregated into `DiscoveryResult.excluded`.