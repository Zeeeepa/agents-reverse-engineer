<!-- Generated by agents-reverse-engineer v1.0.1 -->

# writers
This directory centralizes functionalities for writing various generated output files, including `AGENTS.md` for AI coding assistant overviews and `.sum` files for content summaries and reproduction-critical source code, handling file persistence and formatting with YAML frontmatter.

## Contents
- [agents-md.ts](./agents-md.ts): Manages the creation and preservation of `AGENTS.md` files, including variant-specific versions, ensuring proper generation markers such as `GENERATED_MARKER_PREFIX` and local content preservation through functions like `writeAgentsMd` and `writeAgentsMdHub`.
- [index.ts](./index.ts): Re-exports writer functionalities from `sum.ts`, `agents-md.ts`, and `claude-md.ts`, acting as the primary entry point for consumers of writer interfaces.
- [sum.ts](./sum.ts): Manages the creation, reading, and formatting of `.sum` and `.annex.sum` files, responsible for parsing and serializing YAML frontmatter for generated content summaries and reproduction artifacts through interfaces like `readSumFile` and `writeSumFile`.

## Behavioral Contracts
- `GENERATED_MARKER_PREFIX` in `agents-md.ts` is verbatim `<!-- Generated by agents-reverse-engineer`.
- `GENERATED_MARKER` in `agents-md.ts` follows the format: `<!-- Generated by agents-reverse-engineer v<version> -->`.
- References to local content in `agents-md.ts` use the format: ` @AGENTS.local.md`.
- References to variant content in `agents-md.ts` use the format: ` @AGENTS.<variant_name>.md`.
- YAML frontmatter parsing in `sum.ts` utilizes the regex: `^---\n([\s\S]*?)\n---\n`.
- Inline YAML array parsing in `sum.ts` uses the regex: `${key}:\s*\[([^\]]*)\]`.
- Multi-line YAML array parsing in `sum.ts` uses the regex: `${key}:\s*\n((?:\\s+-\\s+.+\\n?)+)`.

## File Relationships
- `index.ts` re-exports `readSumFile`, `writeSumFile`, `getSumPath`, `sumFileExists`, `writeAnnexFile`, `getAnnexPath` from `sum.ts`, and `GENERATED_MARKER_PREFIX`, `GENERATED_MARKER`, `isGeneratedAgentsMd`, `writeAgentsMd`, `writeAgentsMdHub` from `agents-md.ts`.
- `sum.ts` utilizes `GENERATED_MARKER` from `agents-md.ts` in its `writeAnnexFile` implementation.
- `agents-md.ts` retrieves the project version via `getVersion()` from `../../version.js`.
- `sum.ts` depends on the `SumFileContent` interface and `SummaryMetadata` type defined in `../types.js`.