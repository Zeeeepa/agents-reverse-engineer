---
generated_at: 2026-02-09T16:10:16.531Z
content_hash: 170a8dbec49b601e218709256527ba0dbfa43f1f69e0aac7a6e7e3f9370fcb86
purpose: types.ts defines the core TypeScript interfaces for the documentation generation pipeline: file analysis results (`An...
---
**types.ts defines the core TypeScript interfaces for the documentation generation pipeline: file analysis results (`AnalysisResult`), extracted metadata schemas (`SummaryMetadata`), and generation options (`SummaryOptions`).**

## Exported Interfaces

**`AnalysisResult`** — Result structure returned after LLM-based file analysis, containing:
- `summary: string` — Generated markdown summary text
- `metadata: SummaryMetadata` — Extracted structured metadata

**`SummaryMetadata`** — Metadata schema extracted during file analysis, with fields:
- `purpose: string` — Primary purpose statement (mandatory)
- `criticalTodos?: string[]` — Optional array of security/breaking issues only
- `relatedFiles?: string[]` — Optional array of tightly-coupled sibling file paths

**`SummaryOptions`** — Configuration object for summary generation behavior:
- `targetLength: 'short' | 'standard' | 'detailed'` — Controls output verbosity
- `includeCodeSnippets: boolean` — Toggles code snippet inclusion in generated summaries

## Integration Points

These types flow through the three-phase pipeline defined in `src/generation/orchestrator.ts`:
- Phase 1 (file analysis): AI backends in `src/ai/backends/` return `AnalysisResult` via `AIService.call()`
- Phase 2 (directory aggregation): `SummaryMetadata` fields (`relatedFiles`, `criticalTodos`) aggregated into `AGENTS.md` via `src/generation/writers/agents-md.ts`
- Phase 3 (root synthesis): `purpose` field extracted from `.sum` YAML frontmatter via `src/generation/collector.ts`

`SummaryOptions` consumed by prompt builders in `src/generation/prompts/builder.ts` to adjust template verbosity and code snippet inclusion rules.

## Design Constraints

- `SummaryMetadata.criticalTodos` intentionally limited to security/breaking issues (not general TODOs) per density rules in project instructions
- `SummaryMetadata.relatedFiles` paths must resolve to actual source files to avoid phantom path validation errors from `src/quality/phantom-paths/validator.ts`
- `AnalysisResult` populated by LLM via subprocess output parsing in `src/ai/subprocess.ts` (expects JSON-serializable structure)