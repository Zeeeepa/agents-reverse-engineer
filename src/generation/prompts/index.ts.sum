---
generated_at: 2026-02-09T14:07:57.503Z
content_hash: 9e8e20e4c2bb7c66f849ccaba5230cb66a1ca6795bd4c2bdf5dd7fb70387cbb1
purpose: Exports prompt-related types, constants, and builder functions for generating AI analysis prompts across all three ph...
---
**Exports prompt-related types, constants, and builder functions for generating AI analysis prompts across all three phases of the documentation pipeline (file analysis, directory aggregation, root synthesis).**

## Exported Types

`PromptContext` — Context object passed to prompt builders containing file/directory metadata, configuration, and aggregated child documentation.

## Exported Constants

`SUMMARY_GUIDELINES` — String constant containing density rules, identifier preservation requirements, and output format constraints enforced across all prompt templates.

## Exported Functions

`buildFilePrompt(context: PromptContext): string` — Constructs Phase 1 prompts for individual file analysis, incorporating import maps, language detection, and file-specific context.

`buildDirectoryPrompt(context: PromptContext): string` — Constructs Phase 2 prompts for directory-level AGENTS.md generation, aggregating child `.sum` files, subdirectory AGENTS.md, and manifest metadata (package.json/Cargo.toml/go.mod).

`buildRootPrompt(context: PromptContext): string` — Constructs Phase 3 prompts for root document synthesis (CLAUDE.md/GEMINI.md/OPENCODE.md), consuming all AGENTS.md files and project metadata.

`detectLanguage(filePath: string): string` — Determines primary programming language from file extension for language-specific prompt customization.

## Module Organization

Re-exports internal types and functions from `./types.js` (`PromptContext`, `SUMMARY_GUIDELINES`) and `./builder.js` (builder functions, language detection). Provides single entry point for prompt generation logic used by `src/generation/executor.ts` during three-phase pipeline execution.

## Integration Points

Consumed by `GenerationExecutor` in `src/generation/executor.ts` which invokes builders per-phase: Phase 1 calls `buildFilePrompt()` for each source file, Phase 2 calls `buildDirectoryPrompt()` for post-order directory traversal, Phase 3 calls `buildRootPrompt()` sequentially for each AI platform template. Prompts passed to `AIService.call()` for subprocess execution.