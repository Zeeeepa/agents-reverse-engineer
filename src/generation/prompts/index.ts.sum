---
generated_at: 2026-02-09T21:27:43.723Z
content_hash: 9e8e20e4c2bb7c66f849ccaba5230cb66a1ca6795bd4c2bdf5dd7fb70387cbb1
purpose: Barrel export module re-exporting prompt construction functions (`buildFilePrompt`, `buildDirectoryPrompt`, `buildRoo...
---
**Barrel export module re-exporting prompt construction functions (`buildFilePrompt`, `buildDirectoryPrompt`, `buildRootPrompt`, `detectLanguage`) and shared prompt types (`PromptContext`, `SUMMARY_GUIDELINES`) from internal `builder.ts` and `types.ts` modules.**

## Exported Symbols

- **`PromptContext`** (type): Re-exported from `./types.js` — context object passed to prompt builders containing file metadata, import maps, and configuration
- **`SUMMARY_GUIDELINES`** (constant): Re-exported from `./types.js` — string constant defining documentation density rules, identifier preservation requirements, and behavioral contract specifications
- **`buildFilePrompt(context: PromptContext): string`**: Re-exported from `./builder.js` — constructs Phase 1 prompt for AI-driven file analysis, embedding source content and import relationships
- **`buildDirectoryPrompt(context: PromptContext): string`**: Re-exported from `./builder.js` — constructs Phase 2 prompt for `AGENTS.md` generation from aggregated `.sum` files and child directory docs
- **`buildRootPrompt(context: PromptContext): string`**: Re-exported from `./builder.js` — constructs Phase 3 prompt for root integration document synthesis (`CLAUDE.md`/`GEMINI.md`/`OPENCODE.md`)
- **`detectLanguage(filePath: string): string`**: Re-exported from `./builder.js` — infers programming language from file extension for syntax-aware prompt customization

## Module Role

Centralizes public API for prompt construction subsystem. Internal implementation split across:
- `builder.ts`: Implements prompt assembly logic with template interpolation
- `types.ts`: Defines `PromptContext` interface and `SUMMARY_GUIDELINES` constant (likely contains reproduction-critical prompt text per annex pattern)
- `templates.ts`: Likely contains multi-line prompt templates (annex candidate based on project structure showing `.annex.md` siblings)

Consumed by `src/generation/executor.ts` and `src/generation/orchestrator.ts` to construct AI service call prompts for three-phase pipeline.