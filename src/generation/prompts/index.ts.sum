---
generated_at: 2026-02-09T17:43:58.317Z
content_hash: 9e8e20e4c2bb7c66f849ccaba5230cb66a1ca6795bd4c2bdf5dd7fb70387cbb1
purpose: Barrel module exporting prompt construction API for three-phase documentation generation: file analysis, directory ag...
---
**Barrel module exporting prompt construction API for three-phase documentation generation: file analysis, directory aggregation, and root synthesis.**

## Exported Types

- `PromptContext` — Context object passed to prompt builders containing file metadata, import maps, child summaries, and configuration
- `SUMMARY_GUIDELINES` — Constant string containing behavioral contracts for AI-generated summaries (density rules, anchor term preservation, reproduction-critical content handling)

## Exported Functions

- `buildFilePrompt(context: PromptContext): string` — Constructs Phase 1 prompt for `.sum` file generation from source code with import maps and language detection
- `buildDirectoryPrompt(context: PromptContext): string` — Constructs Phase 2 prompt for `AGENTS.md` synthesis from child `.sum` files, subdirectory docs, and manifest detection
- `buildRootPrompt(context: PromptContext): string` — Constructs Phase 3 prompt for root integration documents (`CLAUDE.md`, `GEMINI.md`, `OPENCODE.md`) from aggregated `AGENTS.md` corpus
- `detectLanguage(filePath: string): string` — Maps file extensions to language names for prompt context (e.g., `.ts` → `"TypeScript"`, `.py` → `"Python"`)

## Module Organization

Re-exports from `./types.js` provide shared interfaces and constants, while `./builder.js` contains concrete prompt construction logic. Separates prompt template strings (in `./templates.js`) from assembly logic.

## Integration Points

Used by `src/generation/executor.ts` Phase 1/2/3 runners to construct AI service prompts. `PromptContext` populated by orchestrator with discovery results, import extractor output, and child document content via `src/generation/collector.ts`.