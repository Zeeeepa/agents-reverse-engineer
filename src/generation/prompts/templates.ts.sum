---
generated_at: 2026-02-09T21:28:11.721Z
content_hash: 5718abbd5c6a295f904c6f25bc66e433308818e190d1d29dffc4f7f3b96da320
purpose: Exports six string constants defining system and user prompts for ARE's three-phase documentation pipeline (file anal...
---
**Exports six string constants defining system and user prompts for ARE's three-phase documentation pipeline (file analysis, directory aggregation, root synthesis) with density/anchor-preservation rules, incremental update strategies, and behavioral contract reproduction requirements.**

## Exported Constants

- `FILE_SYSTEM_PROMPT` — System prompt for file-level `.sum` generation instructing AI to produce dense, identifier-rich summaries with mandatory behavioral contract preservation (regex patterns verbatim in backticks, format strings, magic constants, environment variables). Defines density rules prohibiting filler phrases ("this file", "provides", "responsible for"), requires every sentence reference specific identifiers, mandates all exported function/class/type/const names appear with exact casing. Specifies annex overflow mechanism for large string constants: write concise summary listing constant names, append `## Annex References` section identifying reproduction-critical constants by name and line count.

- `FILE_USER_PROMPT` — User prompt template for file analysis containing `{{FILE_PATH}}` and `{{CONTENT}}` placeholders. Embeds full project structure tree in `<project-structure>` tags, instructs AI to lead with bold purpose statement `**[FileName] does X.**`, requires minimum sections (purpose + exported symbols with signatures), allows adaptive section selection based on file content.

- `DIRECTORY_SYSTEM_PROMPT` — System prompt for directory-level `AGENTS.md` generation. Mandates first line `<!-- Generated by agents-reverse-engineer -->`, requires `#` heading with directory name, one-paragraph purpose statement. Defines adaptive section strategy (Contents, Subdirectories, Architecture/Data Flow, Stack, Structure, Patterns, Configuration, API Surface, File Relationships, Behavioral Contracts, Reproduction-Critical Constants). Enforces path accuracy constraints: use only Import Map paths, exact directory names from Project Directory Structure, no invented/renamed module paths. Requires Behavioral Contracts section when file summaries contain regex/format specs/magic constants (preserve verbatim, do NOT paraphrase). Links to `.annex.md` files for reproduction-critical constants without inlining content. Defines AGENTS.md as "NAVIGATIONAL INDEX" focusing on what files do, how files relate, directory patterns.

- `FILE_UPDATE_SYSTEM_PROMPT` — System prompt for incremental file summary updates. Instructs AI to preserve structure/headings/phrasing of existing summary where code unchanged, modify only content directly affected by changes, keep unchanged sections VERBATIM without rephrasing. Mandates behavioral contract preservation: regex patterns/format strings/magic constants from existing summary preserved verbatim unless source changed them. Enforces same density/anchor-preservation rules as `FILE_SYSTEM_PROMPT`.

- `DIRECTORY_UPDATE_SYSTEM_PROMPT` — System prompt for incremental `AGENTS.md` updates. Instructs AI to preserve structure/descriptions for unaffected content, modify only entries for changed file summaries/subdirectories, add entries for new files, remove entries for deleted files, avoid reorganization unless required by additions/deletions. Mandates first line `<!-- Generated by agents-reverse-engineer -->`, preserves existing purpose statement unless directory role fundamentally changed. Enforces same path accuracy/consistency/density rules as `DIRECTORY_SYSTEM_PROMPT`.

- `ROOT_SYSTEM_PROMPT` — System prompt for root document synthesis (`CLAUDE.md`/`GEMINI.md`/`OPENCODE.md`). Mandates raw markdown output without conversational text/preamble/meta-commentary. Enforces critical constraint: synthesize ONLY from provided `AGENTS.md` content, do NOT invent/extrapolate/hallucinate features/hooks/APIs/patterns/dependencies not explicitly mentioned, omit missing sections rather than guessing, every claim must be traceable to specific `AGENTS.md` file.

## Behavioral Contracts

**YAML Frontmatter Format:**
```yaml
---
generated_at: 2026-02-09T12:34:56.789Z
content_hash: a3f5d8e9... (SHA-256 hex)
purpose: One-line purpose statement
critical_todos:
  - Security issue
related_files: [path1, path2]
---
```

**Placeholder Substitution Pattern:**
- `{{FILE_PATH}}` — Replaced with source file path in `FILE_USER_PROMPT`
- `{{CONTENT}}` — Replaced with source file content in `FILE_USER_PROMPT`

**Prohibited Filler Phrases:**
- "this file", "this module", "this directory", "provides", "responsible for", "is used to", "basically", "essentially", "provides functionality for"

**Output Formatting Constraints:**
- Start with bold purpose statement: `**Purpose statement here.**`
- No preamble, thinking, meta-commentary before purpose statement
- Do NOT say "Here is...", "Now I'll...", "Based on my analysis...", "Let me create...", "Perfect."
- First line of directory docs must be exactly: `<!-- Generated by agents-reverse-engineer -->`

**Annex Reference Format:**
```markdown
## Annex References
- `CONSTANT_NAME` — description (line count)
```

## Integration Points

Used by `buildFilePrompt()` in `src/generation/prompts/builder.ts` for `.sum` generation (consumes `FILE_SYSTEM_PROMPT`, `FILE_UPDATE_SYSTEM_PROMPT`, `FILE_USER_PROMPT`). Used by `buildDirectoryPrompt()` for `AGENTS.md` generation (consumes `DIRECTORY_SYSTEM_PROMPT`, `DIRECTORY_UPDATE_SYSTEM_PROMPT`). Used by `buildRootPrompt()` for root document synthesis (consumes `ROOT_SYSTEM_PROMPT`). Template placeholders `{{FILE_PATH}}`, `{{CONTENT}}` replaced by prompt builder string interpolation.

## Annex References

- `FILE_SYSTEM_PROMPT` — System prompt for file-level `.sum` generation (72 lines)
- `FILE_USER_PROMPT` — User prompt template for file analysis with project structure embedding (109 lines)
- `DIRECTORY_SYSTEM_PROMPT` — System prompt for directory-level `AGENTS.md` generation (94 lines)
- `FILE_UPDATE_SYSTEM_PROMPT` — System prompt for incremental file summary updates (45 lines)
- `DIRECTORY_UPDATE_SYSTEM_PROMPT` — System prompt for incremental `AGENTS.md` updates (70 lines)
- `ROOT_SYSTEM_PROMPT` — System prompt for root document synthesis (12 lines)