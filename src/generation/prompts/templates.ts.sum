---
generated_at: 2026-02-09T14:08:05.928Z
content_hash: f42a00bdbcd17f2a16db2bbd7917f6b3d099511e00675603248149eac3a7144b
purpose: templates.ts exports prompt constants for ARE's three-phase documentation generation pipeline: FILE_SYSTEM_PROMPT and...
---
**templates.ts exports prompt constants for ARE's three-phase documentation generation pipeline: FILE_SYSTEM_PROMPT and FILE_USER_PROMPT for Phase 1 file analysis, DIRECTORY_SYSTEM_PROMPT for Phase 2 directory aggregation, and ROOT_SYSTEM_PROMPT for Phase 3 root synthesis.**

## Exported Constants

**FILE_SYSTEM_PROMPT: string** — System prompt instructing AI to generate density-focused, identifier-rich file summaries with mandatory anchor term preservation, adaptive section selection, and filler phrase prohibition. Enforces pattern "[ExportName] does X" over "The ExportName function is responsible for...". Requires bold purpose statement as first line without preamble.

**FILE_USER_PROMPT: string** — User prompt template with placeholders `{{FILE_PATH}}` and `{{CONTENT}}` for file path and source code. Includes full project structure listing via `<project-structure>` XML block for cross-file context. Mandates minimum output: bold purpose statement, exported symbols with signatures under `##` headings.

**DIRECTORY_SYSTEM_PROMPT: string** — System prompt for generating `AGENTS.md` navigational indexes consumed by `builder.ts:buildDirectoryPrompt()`. Requires first line `<!-- Generated by agents-reverse-engineer -->` marker. Enforces adaptive section selection (Contents, Subdirectories, Architecture/Data Flow, Stack, Structure, Patterns, Configuration, API Surface, File Relationships) over fixed templates. Mandates path accuracy via Import Map constraint: cross-module references must use exact specifiers from actual import statements, no invented paths. Prohibits contradictions within document (e.g., describing same technique as "regex-based" then "AST-based"). Limits per-file descriptions to 1-2 sentences with key symbol references. Handles user-defined notes via automatic prepending without repetition in generated content.

**ROOT_SYSTEM_PROMPT: string** — System prompt for synthesizing root integration documents (`CLAUDE.md`, `GEMINI.md`, `OPENCODE.md`) from `AGENTS.md` corpus. Consumed by `builder.ts:buildRootPrompt()`. Enforces critical synthesis-only constraint: no invention/extrapolation of features, hooks, APIs, patterns, or dependencies not explicitly mentioned in provided `AGENTS.md` files. Requires raw markdown output without conversational text, preamble, or meta-commentary. Mandates omission over guessing for missing information.

## Design Patterns

**Template Substitution** — `FILE_USER_PROMPT` uses mustache-style placeholders (`{{FILE_PATH}}`, `{{CONTENT}}`) replaced by `builder.ts` via string interpolation during prompt construction.

**Output Format Enforcement** — All prompts use "MANDATORY" constraint sections enforcing structural requirements: bold purpose statements, XML markers (`<!-- Generated by... -->`), identifier density rules, anchor term preservation.

**Adaptive Documentation** — `DIRECTORY_SYSTEM_PROMPT` and `FILE_SYSTEM_PROMPT` instruct AI to select relevant sections dynamically rather than follow fixed templates, adapting to file/directory characteristics.

## Integration Points

**builder.ts** — Imports FILE_SYSTEM_PROMPT, FILE_USER_PROMPT, DIRECTORY_SYSTEM_PROMPT, ROOT_SYSTEM_PROMPT for prompt construction in `buildFilePrompt()`, `buildDirectoryPrompt()`, `buildRootPrompt()`.

**orchestrator.ts** — Consumes prompts indirectly via `builder.ts` during three-phase pipeline execution.

## Constraint Categories

**Density Rules** — Mandate identifier-rich sentences, prohibit filler phrases ("this file", "provides", "responsible for"), enforce technical shorthand over verbose descriptions.

**Anchor Term Preservation** — Require exact exported symbol names with preserved casing, parameter/return types, discriminate against missing identifiers as failures.

**Path Accuracy** — Restrict `DIRECTORY_SYSTEM_PROMPT` references to Import Map entries, forbid invented module paths, enforce exact directory names from project structure.

**Synthesis Constraints** — Limit `ROOT_SYSTEM_PROMPT` to traceability against provided `AGENTS.md` corpus, prohibit hallucination of features/patterns not in source documents.