---
generated_at: 2026-02-09T15:08:24.068Z
content_hash: 7c45f747a3c815a11629fab142997544da6ffc1f850dce8a181dc9a6b8fe78d4
purpose: Defines TypeScript interfaces for incremental update workflow results, progress callbacks, and configuration options.
---
**Defines TypeScript interfaces for incremental update workflow results, progress callbacks, and configuration options.**

## Exported Types

### CleanupResult
Represents outcome of orphan cleanup operations with two string arrays:
- `deletedSumFiles: string[]` — paths to removed `.sum` files for deleted/renamed sources
- `deletedAgentsMd: string[]` — paths to removed `AGENTS.md` files from emptied directories

### UpdateOptions
Configuration for update command execution:
- `includeUncommitted?: boolean` — merges staged and working tree changes with committed diff when true
- `dryRun?: boolean` — previews changes without filesystem writes when true

### UpdateResult
Complete update operation summary containing:
- `analyzedFiles: string[]` — paths processed via Phase 1 (added or modified status)
- `skippedFiles: string[]` — paths excluded due to matching content hashes
- `cleanup: CleanupResult` — orphan deletion outcome from `cleanupOrphans()` and `cleanupEmptyDirectoryDocs()`
- `regeneratedDirs: string[]` — directory paths where `AGENTS.md` was rewritten
- `baseCommit: string` — git SHA at update start (from `getCurrentCommit()`)
- `currentCommit: string` — git SHA at update completion
- `dryRun: boolean` — echoes `UpdateOptions.dryRun` flag

### UpdateProgress
Optional callback interface for streaming update events:
- `onFileStart?: (path: string, status: 'analyzing' | 'skipping') => void` — invoked before processing each file
- `onFileDone?: (path: string, status: 'analyzed' | 'skipped' | 'error') => void` — invoked after processing completion or failure
- `onCleanup?: (path: string, type: 'sum' | 'agents-md') => void` — invoked when orphan file deleted
- `onDirRegenerate?: (path: string) => void` — invoked when directory `AGENTS.md` rewritten

## Type Dependencies

Imports `FileChange` from `../change-detection/types.js` for change detection integration with `status: 'added' | 'modified' | 'deleted' | 'renamed'` discriminated union consumed by update orchestrator's file classification logic.