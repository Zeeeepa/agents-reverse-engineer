---
generated_at: 2026-02-09T21:30:25.729Z
content_hash: 7c45f747a3c815a11629fab142997544da6ffc1f850dce8a181dc9a6b8fe78d4
purpose: Defines TypeScript interfaces for incremental update workflow results, options, and progress callbacks.
---
**Defines TypeScript interfaces for incremental update workflow results, options, and progress callbacks.**

## Exported Types

**CleanupResult** — Result of orphan cleanup operation with `deletedSumFiles: string[]` (removed `.sum` files) and `deletedAgentsMd: string[]` (removed `AGENTS.md` files from empty directories).

**UpdateOptions** — Configuration for update command with `includeUncommitted?: boolean` (include staged + working directory changes) and `dryRun?: boolean` (preview mode without file writes).

**UpdateResult** — Comprehensive update execution result containing `analyzedFiles: string[]` (added/modified files), `skippedFiles: string[]` (unchanged files), `cleanup: CleanupResult` (orphan deletion summary), `regeneratedDirs: string[]` (directories with rebuilt `AGENTS.md`), `baseCommit: string` (git SHA at start), `currentCommit: string` (git SHA at end), and `dryRun: boolean` (execution mode flag).

**UpdateProgress** — Progress callback interface with optional handlers: `onFileStart?: (path: string, status: 'analyzing' | 'skipping') => void` (file processing start), `onFileDone?: (path: string, status: 'analyzed' | 'skipped' | 'error') => void` (file processing completion), `onCleanup?: (path: string, type: 'sum' | 'agents-md') => void` (orphan file deletion), `onDirRegenerate?: (path: string) => void` (directory aggregation).

## Dependencies

Imports `FileChange` from `../change-detection/types.js` to represent git-based file modifications (used in orchestrator implementations, not directly exposed in this type module).

## Design Pattern

Status discriminators use string literal unions (`'analyzing' | 'skipping'`, `'analyzed' | 'skipped' | 'error'`, `'sum' | 'agents-md'`) for type-safe progress event routing and UI rendering in streaming progress reporter.