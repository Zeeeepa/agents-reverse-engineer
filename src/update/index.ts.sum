---
generated_at: 2026-02-09T15:08:17.437Z
content_hash: 879100cdd04f7597c7afab3563e6d72212a2e1f2197ade1c1baa1dfd0fd4139f
purpose: `src/update/index.ts` exports the public API surface for ARE's incremental documentation update system, exposing Upda...
---
**`src/update/index.ts` exports the public API surface for ARE's incremental documentation update system, exposing UpdateOrchestrator for coordinating change detection with regeneration and orphan cleanup utilities for maintaining consistency after deletions and renames.**

## Exported Interfaces

**UpdateOrchestrator** — Primary orchestrator class (from `./orchestrator.js`) coordinating incremental update workflow: content hash comparison, affected directory computation, Phase 1/2 regeneration, orphan cleanup.

**createUpdateOrchestrator** — Factory function (from `./orchestrator.js`) instantiating UpdateOrchestrator with dependencies (AIService, config, progress reporter).

**UpdatePlan** — Type representing the computed update execution plan with `filesToAnalyze`, `filesToSkip`, `affectedDirs`, `orphanedSumFiles` arrays.

## Exported Utilities

**cleanupOrphans** — Function (from `./orphan-cleaner.js`) deleting `.sum` files for deleted source files or renamed oldPaths.

**cleanupEmptyDirectoryDocs** — Function (from `./orphan-cleaner.js`) removing `AGENTS.md` from directories with no remaining source files after cleanup.

**getAffectedDirectories** — Function (from `./orphan-cleaner.js`) computing set of directories requiring `AGENTS.md` regeneration by walking parent directories of changed files.

## Exported Type Definitions

**UpdateOptions** — Type (from `./types.js`) specifying update configuration: `uncommitted` flag for working tree changes, `projectRoot`, `config`, `aiService`, optional `onProgress` callback.

**UpdateResult** — Type (from `./types.js`) representing update execution outcome: `filesAnalyzed`, `filesSkipped`, `orphansRemoved`, `directoryDocsRegenerated`, `durationMs`, optional `qualityReport`.

**UpdateProgress** — Type (from `./types.js`) capturing intermediate progress state during execution: `phase`, `current`, `total`, `message`.

**CleanupResult** — Type (from `./types.js`) summarizing orphan cleanup operations: `orphanedSumFiles`, `emptyDirectoryDocs`, `totalRemoved`.

## Module Architecture

Barrel export pattern re-exporting symbols from three submodules:
- `./orchestrator.js` — Core update workflow coordination
- `./orphan-cleaner.js` — Stale artifact removal logic
- `./types.js` — Shared type definitions

Consumed by `src/cli/update.ts` command handler which invokes `createUpdateOrchestrator()` → `UpdateOrchestrator.execute()` pipeline.