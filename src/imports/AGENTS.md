<!-- Generated by agents-reverse-engineer -->

# src/imports

**Static import analysis subsystem extracting TypeScript/JavaScript import statements via regex-based parsing, filtering relative imports into internal (`./`) and external (`../`) categories, and formatting import maps for directory aggregation prompts consumed during Phase 2 documentation synthesis.**

## Contents

### [extractor.ts](./extractor.ts)
Core import extraction engine exposing `extractImports()` (regex-based parser matching `IMPORT_REGEX` pattern with five capture groups for type keyword, named symbols, namespace imports, default imports, and module specifiers), `extractDirectoryImports()` (reads first 100 lines from each file, filters bare specifiers and `node:` built-ins, classifies relative imports into `internal` and `external` arrays based on `./` vs `../` prefix), and `formatImportMap()` (serializes `FileImports[]` to human-readable text block with `specifier â†’ symbols` lines and optional `(type)` suffix for type-only imports).

### [types.ts](./types.ts)
Type definitions for import analysis: `ImportEntry` interface with `specifier`, `symbols`, and `typeOnly` properties representing single import statements; `FileImports` interface aggregating `fileName`, `externalImports`, and `internalImports` arrays for per-file import classification.

### [index.ts](./index.ts)
Barrel re-export providing public API surface: `extractImports()`, `extractDirectoryImports()`, `formatImportMap()`, `ImportEntry`, `FileImports`.

## Integration Points

**Consumed by `src/generation/prompts/builder.ts`:**
`buildDirectoryAggregationPrompt()` calls `extractDirectoryImports()` to inject import context into directory-level `AGENTS.md` synthesis prompts during Phase 2. Import maps show which files import from parent directories, revealing coupling boundaries and dependency graphs without requiring AST traversal.

## Performance Optimizations

**Line slicing strategy:** Reads only first 100 lines via `content.split('\n').slice(0, 100)` before regex processing (assumption: ES module hoisting places imports at file top). Avoids parsing thousands of implementation lines in large files.

**Bare specifier filtering:** Excludes npm packages (`react`, `lodash`) and Node.js built-ins (`node:fs`) by requiring `specifier.startsWith('.')` or `specifier.startsWith('..')`, reducing import map noise for codebase navigation context.

## Regex Pattern

`IMPORT_REGEX`: `/^import\s+(type\s+)?(?:\{([^}]*)\}|(\*\s+as\s+\w+)|(\w+))\s+from\s+['"]([^'"]+)['"]/gm` with line start anchor preventing dynamic import matches. Capture groups: (1) `type` keyword, (2) named symbols in braces, (3) namespace import `* as name`, (4) default import, (5) module specifier. Resets `lastIndex` to 0 before each `exec()` loop for global regex state hygiene.