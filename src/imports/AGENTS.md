<!-- Generated by agents-reverse-engineer -->

# src/imports

Static import analysis subsystem that extracts and classifies TypeScript/JavaScript import statements from source files to build cross-module dependency maps for documentation generation.

## Contents

### Core Modules

**[extractor.ts](./extractor.ts)** — Parses source text using `IMPORT_REGEX` to extract `ImportEntry[]` via `extractImports()`, aggregates directory-wide imports into `FileImports[]` via `extractDirectoryImports()` (reads first 100 lines per file, filters relative imports, partitions into `internalImports` for same-directory `./` and `externalImports` for parent-directory `../`), serializes dependency data via `formatImportMap()` into human-readable LLM prompt format.

**[types.ts](./types.ts)** — Defines `ImportEntry` interface (`specifier`, `symbols`, `typeOnly` flag for `import type` statements) and `FileImports` interface (`fileName`, `externalImports`, `internalImports` arrays) for representing parsed import statements and file-level dependency aggregations.

**[index.ts](./index.ts)** — Barrel module re-exporting `extractImports`, `extractDirectoryImports`, `formatImportMap` functions and `ImportEntry`, `FileImports` types as public API boundary for imports subsystem.

## Import Parsing Strategy

`IMPORT_REGEX` in `extractor.ts` captures five groups using anchored line-start matching with `/gm` flags: `(type\s+)?` for type-only imports, `\{([^}]*)\}` for named imports, `(\*\s+as\s+\w+)` for namespace imports, `(\w+)` for default imports, and `['"]([^'"]+)['"]` for module specifiers. Performance optimization reads only first 100 lines per file via `content.split('\n').slice(0, 100).join('\n')`, assuming imports cluster at file tops. Relative import classification excludes bare specifiers (npm packages) and `node:` protocol imports via `startsWith('.')` or `startsWith('..')` filter predicate.

## Data Flow

`extractImports()` parses raw source string → `ImportEntry[]` → `extractDirectoryImports()` aggregates per-file → `FileImports[]` with `internalImports`/`externalImports` partition → `formatImportMap()` serializes into `specifier → symbols (type)` notation for AI prompts.

## Integration Points

**Consumed by:** `src/generation/orchestrator.ts` calls `extractDirectoryImports()` during directory-level AGENTS.md generation to populate dependency graphs and identify cross-module coupling. `src/generation/prompts/builder.ts` includes `formatImportMap()` output in AI prompts for context-aware documentation.

**Dependencies:** Uses Node.js `fs/promises` `readFile()` for async file I/O, `path.join()` for cross-platform path construction.

## File Relationships

`extractor.ts` imports types from `types.ts`, `index.ts` re-exports symbols from both modules. The imports subsystem operates independently from `src/discovery/` (file enumeration) and provides input data to `src/generation/prompts/` (AI prompt construction).