<!-- Generated by agents-reverse-engineer v1.0.1 -->

# src/imports

The `src/imports` directory provides utilities for extracting, classifying, and formatting JavaScript/TypeScript import statements from source code, essential for static analysis and generating import maps for LLM prompts.

## Contents

-   [extractor.ts](./extractor.ts) extracts, classifies, and formats JavaScript/TypeScript import statements from source code for analysis.
-   [index.ts](./index.ts) exports import extraction utilities and types including `extractImports`, `extractDirectoryImports`, `formatImportMap`, `ImportEntry`, and `FileImports`.
-   [types.ts](./types.ts) defines `ImportEntry` and `FileImports` for structured import data, specifying `specifier`, `symbols`, `typeOnly`, `fileName`, `externalImports`, and `internalImports`.

## API Surface

`extractImports(sourceContent: string): ImportEntry[]` extracts `ImportEntry` objects from `sourceContent` using `IMPORT_REGEX`, parsing named, namespace, and default imports.
`extractDirectoryImports(dirPath: string, fileNames: string[]): Promise<FileImports[]>` asynchronously reads `fileNames` in `dirPath`, classifying imports as `internal` (`./`) or `external` (`../`), and filtering `node:` built-ins and bare package specifiers, returning `FileImports[]`.
`formatImportMap(fileImports: FileImports[]): string` formats `FileImports` array into a structured string, detailing `fileName`, `specifier`, `symbols`, and `typeOnly` imports for LLM prompts.
`ImportEntry` defines `specifier string`, `symbols string[]`, `typeOnly boolean`.
`FileImports` defines `fileName string`, `externalImports ImportEntry[]`, `internalImports ImportEntry[]`.

## Behavioral Contracts

`IMPORT_REGEX`: `/^import\s+(type\s+)?(?:\{([^}]*)\}|(\*\s+as\s+\w+)|(\w+))\s+from\s+['"]([^'"]+)['"]/gm` captures `type` keyword, named symbols, namespace imports, default imports, and module specifiers from import statements.

## Patterns

`extractDirectoryImports` optimizes performance by reading only the first 100 lines of each file, assuming imports are declared at the file's top.