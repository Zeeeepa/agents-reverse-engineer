<!-- Generated by agents-reverse-engineer v0.9.10 -->

# src/imports

The imports directory exports utilities for parsing TypeScript/JavaScript import statements from source files and formatting import maps for LLM consumption. It provides regex-based extraction across file trees with classification of internal vs. external imports.

## Contents

### Core Functions
- [extractor.ts](./extractor.ts) — `extractImports()` parses individual files via IMPORT_REGEX; `extractDirectoryImports()` reads directories filtering to first 100 lines per file; `formatImportMap()` outputs structured text for LLM prompts with `specifier → symbols` grouping and `(type)` tags.
- [index.ts](./index.ts) — Barrel export aggregating `extractImports`, `extractDirectoryImports`, `formatImportMap`, `ImportEntry`, and `FileImports`.
- [types.ts](./types.ts) — `ImportEntry` (specifier, symbols[], typeOnly flag) and `FileImports` (fileName, externalImports[], internalImports[]) interfaces.

## Behavioral Contracts

**IMPORT_REGEX** (global, multiline):
```
/^import\s+(type\s+)?(?:\{([^}]*)\}|(\*\s+as\s+\w+)|(\w+))\s+from\s+['"]([^'"]+)['"]/gm
```
Captures type keyword, named imports `{...}`, namespace `* as name`, default import, and module specifier from lines starting with `import`.

**Symbol parsing**: named imports via `.split(',').map(s => s.trim().replace(/\s+as\s+\w+/, ''))` strips aliases; namespace via `.replace('* as ', '')` isolates name; default used as-is.

**Filter rules**: `extractDirectoryImports` skips specifiers not starting with `.` or `..` (excludes npm packages and `node:` builtins); classifies `./` as internal, `../` as external.

**Performance**: reads only first 100 lines per file (imports clustered at top).

**Format template**: `{fileName}:\n  {specifier} → {symbols}{typeTag}\n\n` with `typeTag = ' (type)'` for type-only imports.

## Type Surface

- **ImportEntry**: `{ specifier: string; symbols: string[]; typeOnly: boolean }`
- **FileImports**: `{ fileName: string; externalImports: ImportEntry[]; internalImports: ImportEntry[] }`