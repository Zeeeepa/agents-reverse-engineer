---
generated_at: 2026-02-09T13:42:35.162Z
content_hash: ddcb35a58fc7c96be861daff467611b0b3f9fa7cb760da90af97960452c887c8
purpose: ConfigSchema defines Zod schemas for validating `.agents-reverse-engineer/config.yaml` with nested object structures ...
---
**ConfigSchema defines Zod schemas for validating `.agents-reverse-engineer/config.yaml` with nested object structures for exclusion rules, discovery options, output formatting, and AI service configuration, providing type-safe defaults for all fields.**

## Exported Schemas

**ExcludeSchema** - Zod object schema for exclusion configuration with three fields:
- `patterns: z.array(z.string())` - custom glob patterns defaulting to `DEFAULT_EXCLUDE_PATTERNS`
- `vendorDirs: z.array(z.string())` - vendor directories defaulting to `DEFAULT_VENDOR_DIRS`
- `binaryExtensions: z.array(z.string())` - binary file extensions defaulting to `DEFAULT_BINARY_EXTENSIONS`

**OptionsSchema** - Zod object schema for discovery options:
- `followSymlinks: z.boolean()` - defaults to `false`
- `maxFileSize: z.number().positive()` - defaults to `DEFAULT_MAX_FILE_SIZE`

**OutputSchema** - Zod object schema for output formatting:
- `colors: z.boolean()` - ANSI color toggle defaulting to `true`

**AISchema** - Zod object schema for AI service configuration:
- `backend: z.enum(['claude', 'gemini', 'opencode', 'auto'])` - CLI backend selection defaulting to `'auto'`
- `model: z.string()` - model identifier defaulting to `'sonnet'`
- `timeoutMs: z.number().positive()` - subprocess timeout defaulting to `300_000` (5 minutes)
- `maxRetries: z.number().min(0)` - retry attempts defaulting to `3`
- `concurrency: z.number().min(1).max(20)` - worker pool size defaulting to `getDefaultConcurrency` function result
- `telemetry.keepRuns: z.number().min(0)` - log retention count defaulting to `50`

**ConfigSchema** - Root Zod object schema composing `ExcludeSchema`, `OptionsSchema`, `OutputSchema`, `AISchema` under fields `exclude`, `options`, `output`, `ai` respectively, with all nested defaults applied.

## Exported Types

**Config** - TypeScript type inferred from `ConfigSchema` via `z.infer<typeof ConfigSchema>`, representing fully validated configuration object.

**ExcludeConfig** - Type inferred from `ExcludeSchema` for exclusion rules section.

**OptionsConfig** - Type inferred from `OptionsSchema` for discovery options section.

**OutputConfig** - Type inferred from `OutputSchema` for output formatting section.

**AIConfig** - Type inferred from `AISchema` for AI service configuration section.

## Default Value Integration

Imports `DEFAULT_VENDOR_DIRS`, `DEFAULT_BINARY_EXTENSIONS`, `DEFAULT_MAX_FILE_SIZE`, `DEFAULT_EXCLUDE_PATTERNS`, `getDefaultConcurrency` from `./defaults.js` to populate schema defaults. All schemas use `.default()` chaining to ensure empty object `{}` parses successfully with full configuration populated.

## Schema Design Pattern

Each nested schema exports as standalone constant (`ExcludeSchema`, `OptionsSchema`, etc.) enabling granular validation testing and reusable composition. Root `ConfigSchema` assembles nested schemas into single validation pipeline. JSDoc examples demonstrate parsing empty objects and partial overrides via `ConfigSchema.parse()`.