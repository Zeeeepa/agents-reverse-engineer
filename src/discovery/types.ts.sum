---
generated_at: 2026-02-09T14:08:54.154Z
content_hash: 4c45840b650bc80b1f64e7a9fdcb91facda8d7364bf0159ba9453de1df0fcb92
purpose: Defines core TypeScript interfaces for the file discovery system: FileFilter for composable exclusion predicates, Fil...
---
**Defines core TypeScript interfaces for the file discovery system: FileFilter for composable exclusion predicates, FilterResult for discovery outcomes, ExcludedFile for rejection tracking, and WalkerOptions for directory traversal configuration.**

## Exported Types

**FileFilter** — Interface for discovery pipeline filters with `name: string` property and `shouldExclude(path: string, stats?: Stats): Promise<boolean> | boolean` method. Supports both synchronous and asynchronous exclusion predicates. Implemented by GitignoreFilter, BinaryFilter, VendorFilter, CustomPatternFilter.

**ExcludedFile** — Record with `path: string` (absolute path), `reason: string` (human-readable explanation), `filter: string` (name of excluding filter). Used for logging and telemetry of rejected files.

**FilterResult** — Discovery outcome containing `included: string[]` (files passing all filters) and `excluded: ExcludedFile[]` (rejected files with metadata). Returned by filter chain execution in `src/discovery/run.ts`.

**WalkerOptions** — Directory traversal configuration with `cwd: string` (absolute root path), `followSymlinks?: boolean` (default false per symlink skip policy), `dot?: boolean` (default true to include dotfiles). Consumed by walker in `src/discovery/walker.ts`.

## Design Patterns

**Strategy Pattern** — FileFilter interface enables composable filter chain where each filter applies independent exclusion logic. Filters execute sequentially during discovery, short-circuiting on first exclusion match.

**Filter Chain Composition** — Multiple FileFilter implementations combine via array traversal in `src/discovery/run.ts`, with ExcludedFile tracking which filter rejected each path for debugging and telemetry.

## Integration Points

**File Stats Usage** — Optional `stats?: Stats` parameter in `shouldExclude()` enables size-based filtering (BinaryFilter uses `maxFileSize` threshold) without forcing all filters to stat files.

**Async Support** — Return type `Promise<boolean> | boolean` allows filters to perform I/O (GitignoreFilter reads `.gitignore` files, BinaryFilter reads file headers) while supporting synchronous implementations (VendorFilter uses string matching).

## Dependencies

Imports `Stats` from `node:fs` for file metadata access. No other dependencies — pure type definitions consumed across discovery module (`src/discovery/walker.ts`, `src/discovery/run.ts`, `src/discovery/filters/`).