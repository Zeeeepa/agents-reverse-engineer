---
generated_at: 2026-02-09T16:08:46.203Z
content_hash: 21bf8f8555dac27a2608934b9016f732256e87fab42ec4dce4f6c8f1b746e901
purpose: createGitignoreFilter produces FileFilter instances that exclude paths matching .gitignore patterns via the `ignore` ...
---
**createGitignoreFilter produces FileFilter instances that exclude paths matching .gitignore patterns via the `ignore` library.**

## Exported Function

### createGitignoreFilter
```typescript
async function createGitignoreFilter(root: string): Promise<FileFilter>
```
Reads `.gitignore` from `root` directory, parses patterns via `ignore()` library, returns `FileFilter` with `shouldExclude()` method. Missing `.gitignore` file caught silently (filter passes all paths). Normalizes `root` to absolute path via `path.resolve()`.

## FileFilter Implementation

Returned object implements `FileFilter` interface with:
- `name: 'gitignore'` — Filter identifier for debugging/logging
- `shouldExclude(absolutePath: string): boolean` — Path exclusion predicate

## Path Handling

`shouldExclude()` converts absolute paths to relative via `path.relative(normalizedRoot, absolutePath)`:
- Returns `false` for paths outside root (starting with `..`)
- Returns `false` for empty relative paths
- Delegates to `ig.ignores(relativePath)` for pattern matching

**Critical constraint**: `ignore` library requires relative paths without leading slash. Trailing slash semantics apply to directories; this implementation omits trailing slash since file walker returns files only.

## Dependencies

- `ignore` library (`Ignore` type) — Parses and matches .gitignore patterns
- `node:fs/promises` — Async `.gitignore` file reading via `readFile()`
- `node:path` — Path normalization and relative path computation
- `../types.js` — `FileFilter` interface definition

## Integration Points

Used by discovery pipeline (`src/discovery/walker.ts`) as composable filter in filter chain alongside binary filter, vendor filter, custom pattern filter. Consumed during Phase 1 file analysis to respect repository gitignore rules.