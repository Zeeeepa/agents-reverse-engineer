---
generated_at: 2026-02-09T17:43:57.168Z
content_hash: 8334930ab77a89aadf421359a55e0a69194517b120a26ca30f7e986838eabec0
purpose: createVendorFilter() constructs a FileFilter that excludes files within third-party dependency directories using both...
---
**createVendorFilter() constructs a FileFilter that excludes files within third-party dependency directories using both single-segment matching and path pattern matching.**

## Exports

- **`DEFAULT_VENDOR_DIRS`**: `readonly string[]` — Constant array of 10 common vendor directory names: `'node_modules'`, `'vendor'`, `'.git'`, `'dist'`, `'build'`, `'__pycache__'`, `'.next'`, `'venv'`, `'.venv'`, `'target'`.

- **`createVendorFilter(vendorDirs: string[]): FileFilter`** — Factory function that returns a `FileFilter` object with `name: 'vendor'` and `shouldExclude()` method.

## Matching Strategy

createVendorFilter() implements two-tier pattern matching:

1. **Single-segment matching**: Directory names without path separators (e.g., `'node_modules'`) are stored in a `Set<string>` and matched against any segment in the absolute path via `absolutePath.split(path.sep)`.

2. **Path pattern matching**: Patterns containing path separators (e.g., `'apps/vendor'`, `'.agents/skills'`) are normalized to the OS-specific separator via `dir.replace(/[\\/]/g, path.sep)` and matched via `absolutePath.includes(pattern)`.

## FileFilter Interface

The returned object conforms to `FileFilter` from `../types.js`:

```typescript
{
  name: string;
  shouldExclude(absolutePath: string): boolean;
}
```

shouldExclude() returns `true` if the absolute path contains any configured vendor directory as a path segment or substring pattern, `false` otherwise.

## Integration Points

- Consumed by filter chain in `src/discovery/filters/index.ts` as part of composable file exclusion logic.
- DEFAULT_VENDOR_DIRS referenced in `src/config/defaults.ts` for default configuration schema.
- Used during file discovery phase (`src/discovery/walker.ts`) to skip third-party code directories before binary detection and gitignore filtering.