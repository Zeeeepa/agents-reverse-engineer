---
generated_at: 2026-02-09T16:08:40.934Z
content_hash: 8334930ab77a89aadf421359a55e0a69194517b120a26ca30f7e986838eabec0
purpose: createVendorFilter() constructs a FileFilter that excludes files within third-party dependency directories and build ...
---
**createVendorFilter() constructs a FileFilter that excludes files within third-party dependency directories and build output paths using path segment matching and path pattern substring matching.**

## Exported Symbols

### DEFAULT_VENDOR_DIRS
```typescript
const DEFAULT_VENDOR_DIRS: readonly [
  'node_modules', 'vendor', '.git', 'dist', 'build',
  '__pycache__', '.next', 'venv', '.venv', 'target'
]
```
Array of common vendor directory names: `node_modules`, `vendor`, `.git`, `dist`, `build`, `__pycache__`, `.next`, `venv`, `.venv`, `target`. Used as default exclusion list for third-party code, build artifacts, Python cache, Next.js build output, Python virtual environments, and Rust/Java build directories.

### createVendorFilter
```typescript
function createVendorFilter(vendorDirs: string[]): FileFilter
```
Returns a `FileFilter` instance that excludes paths containing any directory from `vendorDirs`. Implements two matching strategies: (1) single-segment matching where directory names like `'node_modules'` match any path segment (e.g., `/project/node_modules/lodash/index.js`), (2) path-pattern matching where patterns like `'.agents/skills'` or `'apps/vendor'` match via substring search after normalizing separators to `path.sep`. The returned filter has `name: 'vendor'` and `shouldExclude(absolutePath: string): boolean` method.

## Pattern Matching Algorithm

The `shouldExclude()` method splits `absolutePath` by `path.sep`, iterates segments checking membership in `singleSegments` Set (O(1) lookup), then iterates `pathPatterns` array checking `absolutePath.includes(pattern)` for substring match. Returns `true` on first match, `false` if no matches found.

Path patterns undergo normalization via `dir.replace(/[\\/]/g, path.sep)` to convert both forward and backslashes to OS-specific separator before classification. Classification uses `normalized.includes(path.sep)` to distinguish path patterns (containing separators) from single segments (no separators).

## Integration with Discovery Pipeline

Implements `FileFilter` interface from `../types.js` with `name: string` and `shouldExclude(absolutePath: string): boolean` signature. Composed with other filters (gitignore, binary, custom) in discovery filter chain orchestrated by `src/discovery/walker.ts`.