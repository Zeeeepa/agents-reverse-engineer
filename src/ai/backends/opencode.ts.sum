---
generated_at: 2026-02-09T15:05:49.395Z
content_hash: 766b567d891820428c3ef97c56fd538afc9041ec7b387958ce79194294ded8e9
purpose: OpenCodeBackend implements AIBackend interface as stub demonstrating backend extension pattern, throwing AIServiceErr...
---
**OpenCodeBackend implements AIBackend interface as stub demonstrating backend extension pattern, throwing AIServiceError from parseResponse() until JSONL output parsing is implemented.**

## Implementation Status

OpenCodeBackend is a non-functional stub deferring implementation to future phase pending OpenCode JSONL output parsing (references RESEARCH.md Open Question 3). All methods except parseResponse() are operational.

## Exported Class

**OpenCodeBackend** implements AIBackend interface with:
- `name: 'opencode'` — Backend identifier string
- `cliCommand: 'opencode'` — Executable name for PATH lookup
- `isAvailable(): Promise<boolean>` — Delegates to isCommandOnPath() from claude.ts backend
- `buildArgs(_options: AICallOptions): string[]` — Returns `['run', '--format', 'json']` CLI arguments, ignores AICallOptions parameter (prompt sent via stdin by subprocess wrapper)
- `parseResponse(_stdout: string, _durationMs: number, _exitCode: number): AIResponse` — Throws AIServiceError with code 'SUBPROCESS_ERROR' and message 'OpenCode backend is not yet implemented. Use Claude backend.'
- `getInstallInstructions(): string` — Returns multiline string with curl-based installation command (`curl -fsSL https://opencode.ai/install | bash`) and documentation URL

## Type Dependencies

Imports AIBackend, AICallOptions, AIResponse from `../types.js` and AIServiceError from same module. Imports isCommandOnPath() utility from `./claude.ts` for CLI detection.

## Backend Extension Pattern

Demonstrates minimal AIBackend implementation where isAvailable() and buildArgs() are functional but parseResponse() blocks usage until output format parsing is solved. Serves as template for adding new AI CLI backends to registry.