<!-- Generated by agents-reverse-engineer v1.0.1 -->

# telemetry
This directory manages AI telemetry by cleaning up old log files and writing new run logs to disk.

## Contents
- [cleanup.ts](./cleanup.ts) cleans up old telemetry log files by removing `run-*.json` files.
- [run-log.ts](./run-log.ts) manages writing `RunLog` data to disk as pretty-printed JSON files.

## Behavioral Contracts
`LOGS_DIR` is `'.agents-reverse-engineer/logs'`. Log files match `run-*.json` and are sorted lexicographically by filename (ISO timestamps). `ENOENT` on `LOGS_DIR` results in 0 files deleted by `cleanupOldLogs`.
The `writeRunLog` function generates filenames by replacing `[:.]` and `[^a-z0-9]` with `-` in `runLog.startTime`, `runLog.backend`, `runLog.model`, and `runLog.command` values.

## API Surface
- `cleanupOldLogs(projectRoot: string, keepCount: number): Promise<number>` removes `run-*.json` files from `projectRoot`'s `LOGS_DIR`, keeping `keepCount` most recent.
- `writeRunLog(projectRoot: string, runLog: RunLog): Promise<string>` asynchronously writes `runLog` of type `RunLog` (`../types.js`) to `projectRoot/.agents-reverse-engineer/logs/run-<command>-<backend>-<model>-<timestamp>.json`.