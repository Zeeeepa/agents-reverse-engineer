---
generated_at: 2026-02-09T14:09:25.451Z
content_hash: c54b67ea5f368404974a24012da22317186b49543249ead73a5cec227f874c98
purpose: `src/orchestration/index.ts` re-exports the orchestration module's public API: concurrency pool, progress reporter, p...
---
**`src/orchestration/index.ts` re-exports the orchestration module's public API: concurrency pool, progress reporter, plan tracker, trace writer, command runner, and shared types.**

## Exported Types

- `FileTaskResult` — Result type for individual file processing tasks
- `RunSummary` — Aggregate summary of command execution (counts, durations, errors)
- `ProgressEvent` — Event payload for progress updates during execution
- `CommandRunOptions` — Configuration options threaded through command runners (includes `tracer?: ITraceWriter`)
- `PoolOptions` — Configuration for worker pool (concurrency, fail-fast, callbacks)
- `TaskResult` — Generic result type from pool execution

## Exported Functions

- `runPool()` — Iterator-based worker pool executing tasks with shared iterator across N workers
- `cleanupOldTraces()` — Retention management for NDJSON trace files

## Exported Classes

- `CommandRunner` — High-level orchestrator with `executeGenerate()`, `executeUpdate()`, `executeDiscover()` methods
- `ProgressReporter` — Streaming progress updates with ETA calculation via moving average
- `ProgressLog` — File-backed progress logging to `.agents-reverse-engineer/progress.log`
- `PlanTracker` — Serialized writer for `GENERATION-PLAN.md` with promise-chain pattern preventing concurrent write corruption

## Exported Factories

- `createTraceWriter()` — Returns `ITraceWriter` implementation (NullTraceWriter or TraceWriter based on flag)

## Exported Interfaces

- `ITraceWriter` — Contract for trace event emission with `emit()`, `end()`, `createChild()` methods
- `TraceEvent` — Discriminated union of trace event types (phase:start/end, worker:start/end, task:pickup/done, subprocess:spawn/exit, retry)
- `TraceEventPayload` — Raw event data before auto-populated fields (`seq`, `ts`, `pid`, `elapsedMs`)

## Module Role

Barrel export aggregating orchestration subsystems: pool-based concurrency (`pool.ts`), progress monitoring (`progress.ts`), plan tracking (`plan-tracker.ts`), telemetry tracing (`trace.ts`), and command execution (`runner.ts`). Provides single import point for three-phase pipeline orchestration with NDJSON trace emission, serialized file writes, and ETA-aware progress streaming.