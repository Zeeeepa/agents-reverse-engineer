---
generated_at: 2026-02-09T16:10:55.424Z
content_hash: c54b67ea5f368404974a24012da22317186b49543249ead73a5cec227f874c98
purpose: Barrel export module exposing the complete orchestration API: runPool, ProgressReporter, ProgressLog, PlanTracker, Co...
---
**Barrel export module exposing the complete orchestration API: runPool, ProgressReporter, ProgressLog, PlanTracker, CommandRunner, ITraceWriter, TraceEvent, TraceEventPayload, createTraceWriter, cleanupOldTraces, and shared types (FileTaskResult, RunSummary, ProgressEvent, CommandRunOptions, PoolOptions, TaskResult).**

## Exported Types

**FileTaskResult** — Outcome of a single file analysis task (success/failure with error details).

**RunSummary** — Aggregated metrics from CommandRunner execution (total files, errors, duration, token counts).

**ProgressEvent** — Event payload emitted during pool execution for progress tracking.

**CommandRunOptions** — Configuration object passed to CommandRunner methods (includes concurrency, timeout, tracer, failFast flags).

**PoolOptions** — Configuration for runPool including concurrency limit and optional tracer.

**TaskResult** — Generic result type from runPool execution (success/failure discriminated union).

**ITraceWriter** — Interface defining emit() method for NDJSON trace event emission.

**TraceEvent** — Union type of all trace event payloads (phase:start/end, worker:start/end, task:pickup/done, subprocess:spawn/exit, retry).

**TraceEventPayload** — Base payload structure for all trace events (seq, ts, pid, elapsedMs).

## Exported Functions

**runPool** — Iterator-based worker pool executing async tasks with shared iterator across N workers, returns aggregated results with error handling.

**createTraceWriter** — Factory function returning TraceWriter instance (writes NDJSON to `.agents-reverse-engineer/traces/`) or NullTraceWriter if tracing disabled.

**cleanupOldTraces** — Deletes old trace files from `.agents-reverse-engineer/traces/` directory, retaining only the most recent keepCount files (default 500).

## Exported Classes

**ProgressReporter** — Streaming progress reporter with ETA calculation via moving average of last 10 task durations, emits ProgressEvent objects, supports spinner UI via ora integration.

**ProgressLog** — File-based progress logger writing human-readable output to `.agents-reverse-engineer/progress.log`, mirrors console output for real-time monitoring.

**PlanTracker** — Serialized writer for `GENERATION-PLAN.md` using promise-chain pattern to prevent corruption from concurrent workers, tracks phase breakdown with file counts.

**CommandRunner** — High-level orchestrator executing three-phase pipeline (file analysis, directory aggregation, root synthesis) with configurable concurrency, timeout, and tracing.

## Module Organization

Re-exports from five submodules:
- `./types.js` — Shared interfaces for task results and run configuration
- `./pool.js` — Concurrency pool implementation with shared iterator pattern
- `./progress.js` — Progress reporting with console and file logging
- `./plan-tracker.js` — Serialized plan file writer
- `./trace.js` — NDJSON trace event emission with cleanup utilities
- `./runner.js` — Three-phase pipeline orchestration

## Usage Pattern

Primary entry point for orchestration layer. Import CommandRunner for high-level three-phase execution, or runPool for custom concurrent task processing. ProgressReporter provides real-time feedback with ETA calculation. TraceWriter enables detailed execution telemetry when `--trace` flag passed via CommandRunOptions.