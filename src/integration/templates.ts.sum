---
generated_at: 2026-02-09T17:45:43.146Z
content_hash: 5c48dfbd377760f6bb3545da841d652b5b0bd11487f2b489623056b193b7d121
purpose: Exports getClaudeTemplates(), getOpenCodeTemplates(), and getGeminiTemplates() to generate platform-specific command ...
---
**Exports getClaudeTemplates(), getOpenCodeTemplates(), and getGeminiTemplates() to generate platform-specific command integration templates for IDE installation, encapsulating COMMANDS object with prompt content, PLATFORM_CONFIGS with naming conventions, and buildTemplate()/buildGeminiToml() factories to produce IntegrationTemplate objects with filename/path/content.**

## Exported Functions

- `getClaudeTemplates(): IntegrationTemplate[]` — Returns array of Claude Code skill templates with `.claude/skills/are-{command}/SKILL.md` paths and `name:` frontmatter
- `getOpenCodeTemplates(): IntegrationTemplate[]` — Returns array of OpenCode command templates with `.opencode/commands/are-{command}.md` paths and `agent: build` frontmatter
- `getGeminiTemplates(): IntegrationTemplate[]` — Returns array of Gemini CLI command templates with `.gemini/commands/are-{command}.toml` paths and TOML `description`/`prompt` fields

## Command Definitions

The `COMMANDS` constant defines seven command configurations: `generate`, `update`, `init`, `discover`, `clean`, `specify`, `help`. Each entry contains:

- `description: string` — One-line command summary
- `argumentHint: string` — CLI argument syntax (e.g., `'[path] [--dry-run] [--concurrency N]'`)
- `content: string` — Multi-line markdown prompt with `<execution>` blocks, placeholder variables `COMMAND_PREFIX` and `VERSION_FILE_PATH`

### Command Behavior Templates

- **generate**: Background execution workflow with 15s poll intervals, reads `.agents-reverse-engineer/progress.log` using offset parameter, checks TaskOutput with `block: false`, summarizes three-phase pipeline (discovery → file analysis → directory/root docs)
- **update**: Background execution identical to generate but reports files updated/unchanged/orphaned, includes `--uncommitted` flag for staged changes
- **init**: Synchronous execution creates `.agents-reverse-engineer/config.yaml`
- **discover**: Background execution with 10s poll intervals, reports file counts from discovery scan
- **clean**: Synchronous execution with STRICT RULES comment block enforcing zero flag additions, reports deletion counts
- **specify**: Background execution with 15s poll intervals, auto-runs generate if no AGENTS.md files exist, supports `--multi-file` and `--output` flags
- **help**: Outputs comprehensive reference with `COMMAND_PREFIX` placeholder for per-platform command syntax (e.g., `/are-generate` vs `/are:generate`)

## Platform Configuration

The `PLATFORM_CONFIGS` object maps three Platform types (`'claude' | 'opencode' | 'gemini'`) to PlatformConfig objects:

- **claude**: `commandPrefix: '/are-'`, `pathPrefix: '.claude/skills/'`, `filenameSeparator: '.'`, `usesName: true`, `versionFilePath: '.claude/ARE-VERSION'`
- **opencode**: `commandPrefix: '/are-'`, `pathPrefix: '.opencode/commands/'`, `filenameSeparator: '-'`, `extraFrontmatter: 'agent: build'`, `usesName: false`, `versionFilePath: '.opencode/ARE-VERSION'`
- **gemini**: `commandPrefix: '/are-'`, `pathPrefix: '.gemini/commands/'`, `filenameSeparator: '-'`, `usesName: false`, `versionFilePath: '.gemini/ARE-VERSION'`

## Template Generation Logic

- `buildFrontmatter(platform, commandName, description): string` — Constructs YAML frontmatter with optional `name:` field (if usesName true) and optional extraFrontmatter string
- `buildGeminiToml(commandName, command): string` — Generates TOML format with `description = "..."` and `prompt = """..."""` triple-quoted multiline strings after replacing COMMAND_PREFIX and VERSION_FILE_PATH placeholders
- `buildTemplate(platform, commandName, command): IntegrationTemplate` — Delegates to buildGeminiToml() for gemini platform, otherwise constructs markdown with frontmatter + content, performs placeholder substitution for COMMAND_PREFIX and VERSION_FILE_PATH
- `getTemplatesForPlatform(platform): IntegrationTemplate[]` — Maps Object.entries(COMMANDS) through buildTemplate() for the specified platform

## Path Naming Patterns

- Claude: Nested directory structure `.claude/skills/are-{command}/SKILL.md` (e.g., `.claude/skills/are-generate/SKILL.md`)
- OpenCode: Flat file structure `.opencode/commands/are-{command}.md` (e.g., `.opencode/commands/are-generate.md`)
- Gemini: Flat TOML structure `.gemini/commands/are-{command}.toml` (e.g., `.gemini/commands/are-generate.toml`)

## Template Content Patterns

All command content blocks include:
- Version display instruction: `Read VERSION_FILE_PATH and show the user: agents-reverse-engineer vX.Y.Z`
- Background execution via `npx agents-reverse-engineer@latest {command} $ARGUMENTS`
- Progress polling loop: `sleep N`, Read tool with offset parameter, TaskOutput with `block: false`
- Completion summary with metrics (files analyzed/updated/deleted, phase counts, inconsistency warnings)

Commands with long execution times (generate, update, specify) use 15s poll intervals. Discover uses 10s intervals. Clean and init execute synchronously without polling.