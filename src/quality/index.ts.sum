---
generated_at: 2026-02-09T16:11:18.525Z
content_hash: ace71137f853e1fd5c989c3d4e5326fe3cb526ea38d3fc753486e7d037c687b9
purpose: Public API barrel module for quality analysis subsystem, re-exporting inconsistency detection functions (`checkCodeVs...
---
**Public API barrel module for quality analysis subsystem, re-exporting inconsistency detection functions (`checkCodeVsDoc`, `checkCodeVsCode`, `checkPhantomPaths`), reporting utilities (`buildInconsistencyReport`, `formatReportForCli`), density validation (`validateFindability`), and all discriminated union types for inconsistency classification.**

## Exported Types

Re-exports from `./types.js`:
- `InconsistencySeverity` — Severity classification type
- `CodeDocInconsistency` — Discriminated union member for missing exported symbols in `.sum` documentation
- `CodeCodeInconsistency` — Discriminated union member for duplicate symbol exports across multiple files
- `PhantomPathInconsistency` — Discriminated union member for unresolved path references in `AGENTS.md`
- `Inconsistency` — Discriminated union of all inconsistency types
- `InconsistencyReport` — Container type with `metadata`, `issues[]`, and `summary` aggregation

Re-exports from `./density/validator.js`:
- `FindabilityResult` — Return type from `validateFindability()` containing density metrics

## Code-vs-Doc Validation

Exports from `./inconsistency/code-vs-doc.js`:
- `extractExports(filePath: string): string[]` — Regex-based extraction of exported symbols via pattern `/^[ \t]*export\s+(?:default\s+)?(?:function|class|const|let|var|type|interface|enum)\s+(\w+)/gm`
- `checkCodeVsDoc(filePath: string, sumContent: string): CodeDocInconsistency | null` — Verifies all extracted exports appear in `.sum` summary text via substring search, returns `null` on pass or `CodeDocInconsistency` with `missingFromDoc` array on failure

## Code-vs-Code Validation

Exports from `./inconsistency/code-vs-code.js`:
- `checkCodeVsCode(files: string[]): CodeCodeInconsistency[]` — Aggregates exports across per-directory file groups into `Map<symbol, string[]>`, returns array of `CodeCodeInconsistency` for symbols appearing in multiple files with pattern `'duplicate-export'`

## Phantom Path Detection

Exports from `./phantom-paths/index.js`:
- `checkPhantomPaths(agentsMdPath: string): PhantomPathInconsistency[]` — Extracts path-like strings from `AGENTS.md` via three regex patterns (markdown links `/\[(?:[^\]]*)\]\((\.[^)]+)\)/g`, backtick-quoted paths `` /`((?:src\/|\.\.?\/)[^`]+\.[a-z]{1,4})`/g ``, prose-embedded `/(?:from|in|by|via|see)\s+`?(src\/[\w\-./]+)`?/gi`), resolves against AGENTS.md directory and project root with `.ts`/`.js` fallback, returns array of unresolved references

## Inconsistency Reporting

Exports from `./inconsistency/reporter.js`:
- `buildInconsistencyReport(issues: Inconsistency[], metadata: object): InconsistencyReport` — Constructs report with timestamp, projectRoot, filesChecked, durationMs metadata and summary counts by type/severity
- `formatReportForCli(report: InconsistencyReport): string` — Formats `InconsistencyReport` for terminal display with ANSI color codes via picocolors

## Density Validation

Exports from `./density/validator.js`:
- `validateFindability(sumContent: string): FindabilityResult` — Disabled feature after removal of structured `publicInterface` from `SumFileContent` schema, returns density metrics for identifier-rich summary validation

## Module Organization

Barrel pattern aggregates four subsystems:
1. **Inconsistency detection** — code-vs-doc (exports missing from summaries), code-vs-code (duplicate symbols), phantom-paths (unresolved references in `AGENTS.md`)
2. **Reporting** — `buildInconsistencyReport()` aggregation, `formatReportForCli()` terminal rendering
3. **Density validation** — `validateFindability()` checks for identifier density in summaries (currently disabled)
4. **Shared types** — Discriminated unions for inconsistency classification with `pattern` discriminator field

Consumer modules import via `import { checkCodeVsDoc, buildInconsistencyReport } from '@/quality'` instead of direct submodule paths.