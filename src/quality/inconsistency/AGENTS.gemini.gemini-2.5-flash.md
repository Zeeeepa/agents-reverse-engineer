<!-- Generated by agents-reverse-engineer v1.0.1 -->

# src/quality/inconsistency
This directory contains modules for detecting and reporting various types of inconsistencies within the codebase, specifically between code exports and documentation, and identifying duplicate symbol exports across files.

## Contents
- [code-vs-code.ts](./code-vs-code.ts): Detects cross-file duplicate symbol exports and flags them as `CodeCodeInconsistency`.
- [code-vs-doc.ts](./code-vs-doc.ts): Identifies inconsistencies between TypeScript/JavaScript code exports and `.sum` documentation content, particularly `missingFromDoc`.
- [reporter.ts](./reporter.ts): Builds and formats `InconsistencyReport` objects for CLI plain text or GitHub-flavored Markdown output based on `Inconsistency` issues.

## Architecture / Data Flow
`checkCodeVsCode` (from `code-vs-code.ts`) processes `files`, utilizes `extractExports` (from `./code-vs-doc.ts`) to populate an `exportMap: Map<string, string[]>`, and identifies `CodeCodeInconsistency` instances when `paths.length > 1`. `checkCodeVsDoc` (from `code-vs-doc.ts`) compares `extractExports` results with `sumContent.summary` (a `SumFileContent` object) to flag `CodeDocInconsistency` objects for `missingFromDoc`. `buildInconsistencyReport` (from `reporter.ts`) aggregates `Inconsistency` issues (including `CodeCodeInconsistency` and `CodeDocInconsistency` types) by `type` and `severity` into an `InconsistencyReport`, which `formatReportForCli` or `formatReportAsMarkdown` then formats for output.

## Behavioral Contracts
`code-vs-doc.ts` uses the regular expression `/^[ \t]*export\s+(?:default\s+)?(?:function|class|const|let|var|type|interface|enum)\s+(\w+)/gm` to `extractExports` named and default export identifiers from `sourceContent`. Inconsistencies flagged by `code-vs-code.ts` have `type: 'code-vs-code'`, `severity: 'warning'`, and `pattern: 'duplicate-export'`. `code-vs-doc.ts` flags `CodeDocInconsistency` with `type: 'code-vs-doc'` and `severity: 'warning'`. `reporter.ts` assigns `severityTag` values `[ERROR]`, `[WARN]`, or `[INFO]` for CLI output and `` `ERROR` ``, `` `WARN` ``, or `` `INFO` `` for Markdown.

## File Relationships
`code-vs-code.ts` utilizes `extractExports` from `./code-vs-doc.ts` and imports `CodeCodeInconsistency` from `../types.js`. `code-vs-doc.ts` depends on `SumFileContent` from `../../generation/writers/sum.js` and `CodeDocInconsistency` from `../types.js`. `reporter.ts` consumes `Inconsistency` and `InconsistencyReport` types from `../types.js`.