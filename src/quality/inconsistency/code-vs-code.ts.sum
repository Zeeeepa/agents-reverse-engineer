---
generated_at: 2026-02-09T16:09:16.839Z
content_hash: 48a2ef2363302abe6f4b31022b7afa304960c3631294ddbed6bbe3e4b3251a9a
purpose: checkCodeVsCode() detects duplicate exports across source files by aggregating symbol names per file and flagging sym...
---
**checkCodeVsCode() detects duplicate exports across source files by aggregating symbol names per file and flagging symbols exported from multiple files within a scoped group.**

## Exported Functions

**checkCodeVsCode(files: Array<{ path: string; content: string }>): CodeCodeInconsistency[]**
Detects duplicate exports across file groups by extracting symbol names via `extractExports()` from `code-vs-doc.ts`, building a `Map<string, string[]>` where keys are export names and values are file paths, and returning inconsistency records for symbols appearing in multiple files. Each inconsistency has `type: 'code-vs-code'`, `severity: 'warning'`, `pattern: 'duplicate-export'`, `files` array of paths, and `description` string with count.

## Dependencies

**extractExports()** imported from `./code-vs-doc.js` performs regex-based symbol extraction using pattern `/^[ \t]*export\s+(?:default\s+)?(?:function|class|const|let|var|type|interface|enum)\s+(\w+)/gm`.

**CodeCodeInconsistency** type imported from `../types.js` represents cross-file inconsistencies with discriminator `type: 'code-vs-code'`.

## Algorithm

Iterates `files` array, calls `extractExports(file.content)` to get symbol set, populates `exportMap` by appending `file.path` to existing symbol arrays or initializing new entries. Second pass filters `exportMap` entries where `paths.length > 1` and constructs inconsistency objects with formatted description `"Symbol \"${name}\" exported from ${paths.length} files"`.

## Scoping Contract

Caller must scope input to per-directory file groups to avoid false positives across unrelated modules. No AI calls or AST analysisâ€”purely heuristic substring matching. Intentional duplication (e.g., factory patterns, parallel implementations) cannot be distinguished without semantic analysis.

## Integration Points

Used by `reporter.ts` in quality validation pipeline alongside `checkCodeVsDoc()` and phantom path validators. Output format matches `InconsistencyReport.issues[]` discriminated union schema.