---
generated_at: 2026-02-09T21:28:05.731Z
content_hash: 48a2ef2363302abe6f4b31022b7afa304960c3631294ddbed6bbe3e4b3251a9a
purpose: checkCodeVsCode() detects duplicate exports across a scoped file group by aggregating symbol names via extractExports...
---
**checkCodeVsCode() detects duplicate exports across a scoped file group by aggregating symbol names via extractExports() and flagging any symbol exported from multiple files within the group.**

## Exported Function

**checkCodeVsCode(files: Array<{ path: string; content: string }>): CodeCodeInconsistency[]**

Accepts array of file objects with `path` and `content` properties, extracts exported symbols from each file via `extractExports()` (imported from `./code-vs-doc.js`), builds aggregation map `Map<string, string[]>` where key is symbol name and value is array of file paths exporting that symbol, returns `CodeCodeInconsistency[]` array containing entries for symbols appearing in more than one file.

## Algorithm

Initializes `exportMap` as `Map<string, string[]>`, iterates `files` array calling `extractExports(file.content)` for each entry, populates map by appending `file.path` to existing array or creating new entry with single-element array. Second pass iterates map entries via `for (const [name, paths] of exportMap)`, pushes `CodeCodeInconsistency` object to output array when `paths.length > 1`.

## Inconsistency Shape

Each returned `CodeCodeInconsistency` object contains:
- `type: 'code-vs-code'` discriminant
- `severity: 'warning'` static level
- `files: paths` array of all file paths exporting the duplicate symbol
- `description: \`Symbol "${name}" exported from ${paths.length} files\`` template
- `pattern: 'duplicate-export'` static sentinel

## Scoping Constraint

Caller must scope input to per-directory file groups to prevent false positives across unrelated modules (e.g., intentional re-exports, monorepo package boundaries, namespace collisions across domains). No directory validation enforced within function—relies on caller to partition files appropriately before invocation.

## Dependencies

Imports `extractExports()` from `./code-vs-doc.js` for regex-based export symbol extraction via pattern `/^[ \t]*export\s+(?:default\s+)?(?:function|class|const|let|var|type|interface|enum)\s+(\w+)/gm`. Imports `CodeCodeInconsistency` type from `../types.js`.

## Design Pattern

Pure heuristic analysis with no AI service calls, operates entirely on static regex matching of export statements. Detection granularity limited to symbol names—no AST analysis to distinguish intentional duplication (facade pattern, barrel exports, interface/implementation pairs) from unintended collisions.