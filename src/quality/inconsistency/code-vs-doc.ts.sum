---
generated_at: 2026-02-09T15:06:12.676Z
content_hash: 20526dbcc3fa83bca2efb8a76027db019b8944ad212cf781c189935bfced0410
purpose: code-vs-doc.ts detects documentation drift by comparing exported symbols extracted from TypeScript/JavaScript source ...
---
**code-vs-doc.ts detects documentation drift by comparing exported symbols extracted from TypeScript/JavaScript source code against mentions in corresponding `.sum` file text.**

## Exported Functions

**extractExports(sourceContent: string): string[]**
Extracts exported identifier names from TypeScript/JavaScript source using regex `/^[ \t]*export\s+(?:default\s+)?(?:function|class|const|let|var|type|interface|enum)\s+(\w+)/gm`. Matches patterns like `export function foo`, `export const BAR`, `export default class App`, ignoring re-exports and commented lines. Returns array of identifier strings.

**checkCodeVsDoc(sourceContent: string, sumContent: SumFileContent, filePath: string): CodeDocInconsistency | null**
Compares exports from `extractExports()` against `sumContent.summary` text via case-sensitive substring search. Returns `CodeDocInconsistency` with `type: 'code-vs-doc'`, `severity: 'warning'`, `details.missingFromDoc[]` (exports not found in summary text), `details.missingFromCode: []` (always empty array). Returns `null` when all exports appear in documentation.

## Integration Points

Consumes `SumFileContent` from `../../generation/writers/sum.js` (parsed `.sum` file with `summary` field). Produces `CodeDocInconsistency` discriminated union member defined in `../types.js`. Called by quality validation orchestrator during post-generation consistency checks.

## Algorithm

Heuristic validation using regex-based export extraction and substring matching. Pattern: `/^[ \t]*export\s+(?:default\s+)?(?:function|class|const|let|var|type|interface|enum)\s+(\w+)/gm` with global and multiline flags. Filters `exports.filter(e => !sumText.includes(e))` to identify undocumented symbols. No AST parsing or import resolution.

## Limitations

Regex approach misses complex export patterns (destructured exports, namespace exports, dynamic `export {}`). Substring matching yields false negatives when export names appear in prose unrelated to API documentation. No detection of obsolete documentation for removed exports. `missingFromCode` field always empty (struct retained for compatibility with legacy `publicInterface` schema).