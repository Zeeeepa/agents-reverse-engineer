---
generated_at: 2026-02-09T21:28:05.404Z
content_hash: 20526dbcc3fa83bca2efb8a76027db019b8944ad212cf781c189935bfced0410
purpose: code-vs-doc.ts detects documentation drift by comparing exported identifiers from TypeScript/JavaScript source files ...
---
**code-vs-doc.ts detects documentation drift by comparing exported identifiers from TypeScript/JavaScript source files against their corresponding .sum file content, flagging symbols that exist in code but are undocumented.**

## Exported Functions

**extractExports(sourceContent: string): string[]** — Extracts exported identifier names from TypeScript/JavaScript source using regex pattern `/^[ \t]*export\s+(?:default\s+)?(?:function|class|const|let|var|type|interface|enum)\s+(\w+)/gm`. Captures identifiers from export declarations including `export function`, `export const`, `export default class`, `export type`, `export interface`, and `export enum`. Returns array of identifier strings, ignoring re-exports, comments, and non-exported declarations.

**checkCodeVsDoc(sourceContent: string, sumContent: SumFileContent, filePath: string): CodeDocInconsistency | null** — Compares exports extracted via `extractExports()` against `sumContent.summary` text using case-sensitive substring matching. Returns `CodeDocInconsistency` with `type: 'code-vs-doc'` and `severity: 'warning'` when exports are missing from documentation. Populates `details.missingFromDoc` with undocumented export names and `details.missingFromCode` as empty array (legacy field). Returns `null` when all exports appear in `.sum` text.

## Type Dependencies

Consumes `SumFileContent` from `../../generation/writers/sum.js` providing `summary: string` field for substring search. Returns `CodeDocInconsistency` from `../types.js` with discriminated union fields: `type`, `severity`, `filePath`, `sumPath`, `description`, and `details: { missingFromDoc: string[], missingFromCode: string[] }`.

## Detection Strategy

Uses heuristic substring presence check: `sumText.includes(e)` determines whether export identifier `e` appears anywhere in `.sum` markdown content. False negatives occur when identifier appears in prose unrelated to API surface (e.g., "the function exports data"). No AST analysis or semantic validation performed.

## Regex Limitations

Pattern `/^[ \t]*export\s+(?:default\s+)?(?:function|class|const|let|var|type|interface|enum)\s+(\w+)/gm` misses:
- Destructured exports: `export const { foo, bar } = obj`
- Namespace exports: `export * as ns from './mod'`
- Re-exported identifiers: `export { foo } from './other'`
- Dynamic exports: `module.exports = ...`
- Multi-line declarations where export keyword and identifier span separate lines