---
generated_at: 2026-02-09T16:09:17.214Z
content_hash: 20526dbcc3fa83bca2efb8a76027db019b8944ad212cf781c189935bfced0410
purpose: code-vs-doc.ts detects documentation drift by extracting exported identifiers from TypeScript/JavaScript source and v...
---
**code-vs-doc.ts detects documentation drift by extracting exported identifiers from TypeScript/JavaScript source and verifying their presence in corresponding .sum file content.**

## Exported Functions

**extractExports(sourceContent: string): string[]** — Extracts exported identifiers from TypeScript/JavaScript source using regex pattern `/^[ \t]*export\s+(?:default\s+)?(?:function|class|const|let|var|type|interface|enum)\s+(\w+)/gm`. Matches declarations like `export function foo`, `export const BAR`, `export default class App` while ignoring re-exports and commented-out lines. Returns array of captured identifier names from match group 1.

**checkCodeVsDoc(sourceContent: string, sumContent: SumFileContent, filePath: string): CodeDocInconsistency | null** — Compares source exports against parsed .sum file content to detect documentation drift. Extracts exports via `extractExports()`, then filters for symbols not present in `sumContent.summary` text via case-sensitive substring matching (`!sumText.includes(e)`). Returns `CodeDocInconsistency` with `type: 'code-vs-doc'`, `severity: 'warning'`, `details.missingFromDoc[]` array when drift detected, or `null` when documentation is consistent. The `details.missingFromCode` array is always empty (legacy field from removed `publicInterface` schema).

## Detection Algorithm

Performs one-way consistency check: exports present in source but undocumented. Regex captures identifier from declaration keywords (`function`, `class`, `const`, `let`, `var`, `type`, `interface`, `enum`) following `export` or `export default`. Verification uses substring search against entire `.summary` text rather than structured fields, which yields false negatives when symbols appear only in prose unrelated to API surface.

## Type Dependencies

Imports `SumFileContent` from `../../generation/writers/sum.js` for parsed .sum structure with `summary: string` field. Imports `CodeDocInconsistency` from `../types.js` for discriminated union member with required fields: `type`, `severity`, `filePath`, `sumPath`, `description`, `details: { missingFromDoc: string[], missingFromCode: string[] }`.

## Known Limitations

Regex-based export extraction misses complex patterns including destructured exports (`export { foo, bar }`), namespace exports (`export * from './module'`), dynamic exports, and multiline declarations. Substring matching produces false negatives when export names appear in comments, prose descriptions, or unrelated context rather than as documented API surface. No AST analysis performed to distinguish intentional API surface from implementation details.