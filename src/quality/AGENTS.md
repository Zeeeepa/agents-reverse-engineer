<!-- Generated by agents-reverse-engineer -->

# src/quality

Validates generated documentation quality through code-documentation consistency checks, cross-file duplicate detection, phantom path resolution, and symbol findability analysis, producing structured `InconsistencyReport` for CLI consumption.

## Contents

### Public API

**[index.ts](./index.ts)** — Barrel re-export consolidating four validation subsystems: code-vs-doc (`extractExports`, `checkCodeVsDoc`), code-vs-code (`checkCodeVsCode`), phantom paths (`checkPhantomPaths`), and density (`validateFindability`). Exports reporting functions `buildInconsistencyReport` and `formatReportForCli` from inconsistency/reporter.ts, type definitions from types.ts (`Inconsistency`, `InconsistencyReport`, `InconsistencySeverity`, `CodeDocInconsistency`, `CodeCodeInconsistency`, `PhantomPathInconsistency`), and `FindabilityResult` from density/validator.ts.

**[types.ts](./types.ts)** — Discriminated union type system defining `Inconsistency` (union of `CodeDocInconsistency`, `CodeCodeInconsistency`, `PhantomPathInconsistency`), structured `InconsistencyReport` with metadata (timestamp, projectRoot, filesChecked, durationMs), `issues` array, and `summary` counts (total, codeVsDoc, codeVsCode, phantomPaths, errors, warnings, info). `InconsistencySeverity` aliases `'info' | 'warning' | 'error'`. `CodeDocInconsistency` tracks missingFromDoc/missingFromCode arrays, `CodeCodeInconsistency` tracks duplicate exports via `pattern: 'duplicate-export'`, `PhantomPathInconsistency` captures referencedPath/resolvedTo/context for broken links.

## Subdirectories

**[inconsistency/](./inconsistency/)** — Regex-based export extraction (`extractExports`), substring-based code-vs-doc validation (`checkCodeVsDoc`), duplicate symbol detection (`checkCodeVsCode`), and plain-text report formatting (`buildInconsistencyReport`, `formatReportForCli`).

**[phantom-paths/](./phantom-paths/)** — `checkPhantomPaths` validator extracting path-like strings from AGENTS.md via three regex patterns (markdown links, backtick paths, prose keywords), resolving against AGENTS.md directory and project root, testing `existsSync()` with `.ts`/`.js` fallback, returning `PhantomPathInconsistency[]` for unresolved references.

**[density/](./density/)** — Disabled `validateFindability()` stub returning empty array after structured publicInterface removal from SumFileContent schema. Module preserved as architectural placeholder for future anchor term coverage validation.

## Validation Pipeline

Quality checks operate post-generation on `.sum` files (via `src/generation/writers/sum.ts` outputs) and `AGENTS.md` artifacts (via `src/generation/writers/agents-md.ts` outputs). Orchestrated by `src/cli/generate.ts` or `src/cli/update.ts` after documentation write phase, producing `InconsistencyReport` for terminal output via `formatReportForCli`. Regex-based heuristics in code-vs-doc and code-vs-code yield false negatives on complex exports (destructured, namespace) and false positives on prose identifier mentions unrelated to API surface.

## Integration Points

Consumed by CLI commands (`src/cli/generate.ts`, `src/cli/update.ts`) after `src/generation/orchestrator.ts` completes three-phase generation (file analysis, directory rollup, root docs). Quality validators read generated artifacts from disk, cross-referencing with discovered source files from `src/discovery/walker.ts` output. Structured `InconsistencyReport` enables machine-readable quality gates or IDE integrations beyond CLI text rendering.