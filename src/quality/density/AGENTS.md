<!-- Generated by agents-reverse-engineer -->

# quality/density

Validates that exported symbols from .sum files appear in parent AGENTS.md content using string-based matching, no LLM calls.

## Contents

### [validator.ts](./validator.ts)
Exports `validateFindability()` and `FindabilityResult` type for heuristic symbol presence validation. Currently returns empty array because structured metadata extraction (`publicInterface` field) was removed from the pipeline; function signature preserved for future post-processing re-implementation.

## Behavioral Contracts

**Validation Logic (Currently Inactive):**
- `validateFindability(agentsMdContent, sumFiles)` → `FindabilityResult[]` — intended to scan `agentsMdContent` string for symbol names extracted from `sumFiles`, return per-file results with `score` (0.0–1.0 ratio of found/tested)
- Current implementation: returns `[]` because `publicInterface` field no longer exists in `SumFileContent`

**FindabilityResult Schema:**
```typescript
{
  filePath: string,          // .sum file path
  symbolsTested: string[],   // symbols checked for presence
  symbolsFound: string[],    // symbols present in AGENTS.md
  symbolsMissing: string[],  // symbols absent
  score: number              // found / tested, range [0, 1]
}
```

## Architecture Context

**Validation Strategy:**
- Purely string-based matching — no AI/LLM calls (differs from `src/quality/inconsistency/` modules)
- Deterministic, fast verification suitable for CI/post-generation checks
- Prevents symbol loss during .sum → AGENTS.md aggregation

**Data Flow:**
```
SumFileContent map + AGENTS.md content
  → validateFindability()
  → FindabilityResult[] (empty until re-implementation)
```

## Integration Points

- Imports `SumFileContent` from `../../generation/writers/sum.js` — depends on .sum file schema
- Intended consumers: `src/quality/index.ts` aggregation, orchestration layer quality gates
- Parallel to inconsistency validators (code-vs-code, code-vs-doc) but operates on aggregated documentation layer

## Re-implementation Notes

Future work requires:
1. Restore structured export metadata extraction in .sum generation phase
2. Implement symbol extraction regex/parser in `validateFindability()`
3. Add case-insensitive matching, handle namespace qualifiers (e.g., `module.symbol`)
4. Define score thresholds for pass/fail in orchestration layer