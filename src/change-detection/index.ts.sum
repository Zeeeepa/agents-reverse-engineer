---
generated_at: 2026-02-09T15:06:32.042Z
content_hash: c77dda0aa1a589b4b753f5790ede7d263fca6eb7a99f509b4e07fe04bf0e20f8
purpose: index.ts exports the public API surface for the change-detection module, providing git-based change detection and SHA...
---
**index.ts exports the public API surface for the change-detection module, providing git-based change detection and SHA-256 content hashing for incremental update workflows.**

## Exported Functions

- `isGitRepo(): Promise<boolean>` — Asynchronously checks if current directory is a git repository
- `getCurrentCommit(): Promise<string>` — Returns HEAD commit SHA for baseline comparison
- `getChangedFiles(options?: ChangeDetectionOptions): Promise<ChangeDetectionResult>` — Detects added/modified/deleted/renamed files via git diff parsing with optional uncommitted changes merge
- `computeContentHash(filePath: string): Promise<string>` — Computes SHA-256 hex digest of file contents for hash-based skip logic
- `computeContentHashFromString(content: string): string` — Synchronously computes SHA-256 hex digest from string input (used by SumFileContent frontmatter generation)

## Exported Types

- `ChangeType` — Discriminated union literal: `'added' | 'modified' | 'deleted' | 'renamed'`
- `FileChange` — Object with `path: string`, `status: ChangeType`, optional `oldPath?: string` (for renames)
- `ChangeDetectionResult` — Object with `changes: FileChange[]`, `baseCommit: string`, `hasUncommittedChanges: boolean`
- `ChangeDetectionOptions` — Configuration object with optional `baseCommit?: string`, `includeUncommitted?: boolean`, `repositoryRoot?: string`

## Module Role

Re-exports all symbols from `detector.ts` and `types.ts` to provide single import entry point for update workflow (see `src/update/orchestrator.ts`). Consumed by `runUpdate()` which calls `getChangedFiles()` to compute delta, then cross-references against `.sum` file `content_hash` frontmatter via `computeContentHash()` to determine `filesToAnalyze` vs `filesToSkip`. Git integration supports both committed changes (`git diff <baseCommit>..HEAD`) and uncommitted (`--uncommitted` flag merges `git status --porcelain` output). Falls back to SHA-256 hashing alone for non-git workflows (isGitRepo check).