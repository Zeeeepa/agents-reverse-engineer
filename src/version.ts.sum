---
generated_at: 2026-02-09T17:46:14.179Z
content_hash: d9caa33615b771069b778e0f5f27babaff43c440b86055ccf94e42c0751b0632
purpose: getVersion() reads the package.json version field from the parent directory of the compiled module, returning 'unknow...
---
**getVersion() reads the package.json version field from the parent directory of the compiled module, returning 'unknown' on any error.**

## Exported Function

- `getVersion(): string` — Synchronously reads `../package.json` relative to the compiled module location, parses JSON, extracts `version` field, returns it or `'unknown'` if parsing/reading fails.

## Implementation Details

Uses `import.meta.url` to resolve current module path via `fileURLToPath()`, then `dirname()` to get containing directory, constructs `join(__dirname, '..', 'package.json')` path pointing to project root package.json. Reads file synchronously with `readFileSync(packagePath, 'utf-8')`, parses via `JSON.parse()`, accesses `packageJson.version` with fallback `|| 'unknown'`. Wraps entire logic in try-catch returning `'unknown'` on any exception (file not found, invalid JSON, missing version field).

## Integration Points

Called by CLI entry point (`src/cli/index.ts`) to display version in `--version` flag handler and by session lifecycle hooks (`hooks/are-check-update.js`) to compare local version against npm registry for update notifications.

## Runtime Assumptions

Assumes build output structure places compiled `version.js` in `dist/` directory with `package.json` at `dist/../package.json` (project root). ES module context required for `import.meta.url` support (Node.js ≥18.0.0).