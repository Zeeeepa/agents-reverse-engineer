---
generated_at: 2026-02-09T15:08:28.859Z
content_hash: d9caa33615b771069b778e0f5f27babaff43c440b86055ccf94e42c0751b0632
purpose: version.ts exports getVersion() to retrieve the package version from package.json at runtime.
---
**version.ts exports getVersion() to retrieve the package version from package.json at runtime.**

## Exported Function

`getVersion(): string` — Returns the version string from package.json or `'unknown'` if loading fails.

## Implementation Strategy

Uses ES module path resolution via `import.meta.url` converted to file path with `fileURLToPath()`, then constructs absolute path to package.json by traversing one directory up from `__dirname` (`join(__dirname, '..', 'package.json')`). Reads file synchronously via `readFileSync()`, parses JSON, extracts `version` field with fallback to `'unknown'` if field is missing or falsy. Try-catch wrapper returns `'unknown'` on any filesystem or parse errors.

## Dependencies

- `node:fs` — `readFileSync()` for synchronous file read
- `node:path` — `dirname()` and `join()` for path construction
- `node:url` — `fileURLToPath()` for ES module path resolution

## Usage Context

Called by CLI commands to display version information (e.g., `--version` flag, version check hooks). Package version used by session hooks (`are-check-update.js`) for npm registry comparison and by installer operations for reporting installed version. Supports both compiled distribution (`dist/` output) and source execution since path resolution is relative to current module location.