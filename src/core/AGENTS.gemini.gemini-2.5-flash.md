<!-- Generated by agents-reverse-engineer v1.0.1 -->

# src/core

This directory provides the foundational programmatic API for `agents-reverse-engineer`, centralizing core functionalities such as logging, AI service orchestration, file discovery, prompt generation, documentation writing, quality assurance checks, and change detection, all configurable through `ConfigSchema`.

## Contents

-   [`index.ts`](./index.ts): Exposes the `agents-reverse-engineer/core` programmatic API, consolidating logging, AI services, file discovery, prompt generation, documentation writers, quality checks, orchestration, change detection, configuration, and import analysis.
-   [`logger.ts`](./logger.ts): Defines the `Logger` interface to decouple modules from direct console output, providing `nullLogger` (no-op) and `consoleLogger` (writes to `console.error`) implementations.

## Public API

### Logging

`nullLogger`: A no-operation `Logger` instance. `consoleLogger`: A `Logger` instance directing `debug`, `warn`, and `error` to `console.error`. `Logger`: Interface defining `debug(message: string): void`, `warn(message: string): void`, `error(message: string): void` for minimal logging.

### AI

`AIService`: Orchestrates AI backends. `AIServiceOptions`: Configuration for `AIService`. `AIProvider`, `AICallOptions`, `AIResponse`, `AIBackend`, `RetryOptions`, `AIServiceErrorCode`: Types defining AI interaction. `AIServiceError`: Represents errors from AI services. `withRetry`: Implements retry logic. `DEFAULT_RETRY_OPTIONS`: Default retry options. `SubprocessProvider`: Integrates AI via subprocesses. `SubprocessProviderOptions`: Configuration for `SubprocessProvider`.

### Discovery

`discoverFiles`: Orchestrates project file discovery. `walkDirectory`: Performs recursive directory traversal. `applyFilters`: Applies file filters. `FileFilter`, `FilterResult`, `WalkerOptions`: Types defining file discovery.

### Generation: Prompts

`buildFilePrompt`: Generates prompts for file analysis. `buildDirectoryPrompt`: Generates prompts for directory analysis. `detectLanguage`: Detects file language. `PromptContext`: Type for prompt context.

### Generation: Writers

`writeSumFile`: Saves sum files. `readSumFile`: Reads sum files. `getSumPath`: Resolves sum file paths. `sumFileExists`: Checks sum file existence. `getAnnexPath`: Resolves annex file paths. `writeAnnexFile`: Saves annex files. `SumFileContent`: Type for sum file data. `writeAgentsMd`: Creates `AGENTS.md` files. `writeAgentsMdHub`: Creates hub `AGENTS.md` files. `isGeneratedAgentsMd`: Validates `AGENTS.md` origin. `writeClaudeMdPointer`: Creates Claude MD pointers.

### Generation: Orchestration

`DocumentationOrchestrator`: Manages documentation workflows, aliased as `GenerationOrchestrator` and `UpdateOrchestrator`. `GenerationPlan`, `PreparedFile`, `AnalysisTask`, `UpdatePlan`: Types defining orchestration tasks. `buildExecutionPlan`: Constructs an `ExecutionPlan`. `formatExecutionPlanAsMarkdown`: Formats an `ExecutionPlan` as Markdown. `ExecutionPlan`, `ExecutionTask`: Types defining execution plan steps.

### Quality

`extractExports`: Identifies code exports. `checkCodeVsDoc`: Checks code-documentation inconsistencies. `checkCodeVsCode`: Checks internal code inconsistencies. `checkPhantomPaths`: Validates file paths. `buildInconsistencyReport`: Aggregates inconsistency reports. `formatReportForCli`, `formatReportAsMarkdown`: Formats reports for CLI and Markdown. `Inconsistency`, `InconsistencyReport`, `InconsistencySeverity`, `CodeDocInconsistency`, `CodeCodeInconsistency`, `PhantomPathInconsistency`: Types defining inconsistencies.

### Orchestration: Pool

`runPool`: Executes tasks concurrently. `PoolOptions`: Configures the task pool. `TaskResult`: Type for task outcomes.

### Change Detection

`computeContentHash`: Generates file content hashes. `computeContentHashFromString`: Generates string content hashes. `isGitRepo`: Checks if the current directory is a Git repository. `getCurrentCommit`: Retrieves the current Git commit. `getChangedFiles`: Identifies `FileChange`. `FileChange`, `ChangeDetectionResult`: Types defining change detection.

### Configuration

`loadConfig`: Loads project configuration. `findProjectRoot`: Locates the project root. `ConfigSchema`: Defines the structure of `Config`. `getDefaultConcurrency`: Determines default parallelism. `DEFAULT_EXCLUDE_PATTERNS`, `DEFAULT_VENDOR_DIRS`: Default ignored paths.

### Imports

`extractImports`: Parses import statements. `extractDirectoryImports`: Parses directory import statements. `formatImportMap`: Formats import maps.