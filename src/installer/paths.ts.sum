---
generated_at: 2026-02-09T16:10:31.241Z
content_hash: 6d7cb2dc53a7e1c8f5dc0a7e8379f5404d457e928db21548a59a3117039356d3
purpose: paths.ts provides cross-platform path resolution for AI coding assistant runtime installations (Claude, OpenCode, Gem...
---
**paths.ts provides cross-platform path resolution for AI coding assistant runtime installations (Claude, OpenCode, Gemini) with environment variable overrides and installation detection.**

## Exported Functions

**getAllRuntimes(): Array<Exclude<Runtime, 'all'>>**
Returns `['claude', 'opencode', 'gemini']` array of concrete runtime identifiers, excluding the `'all'` meta-runtime.

**getRuntimePaths(runtime: Exclude<Runtime, 'all'>): RuntimePaths**
Returns `RuntimePaths` object containing `global` (absolute path), `local` (relative path), and `settingsFile` (absolute path to settings.json) for specified runtime. Uses `os.homedir()` and `path.join()` for cross-platform compatibility.

**resolveInstallPath(runtime: Exclude<Runtime, 'all'>, location: Location, projectRoot?: string): string**
Returns absolute installation path. For `location === 'global'`, returns `getRuntimePaths(runtime).global`. For local installations, joins `paths.local` with `projectRoot || process.cwd()`.

**getSettingsPath(runtime: Exclude<Runtime, 'all'>): string**
Returns absolute path to runtime's settings.json file via `getRuntimePaths(runtime).settingsFile`.

**isRuntimeInstalledLocally(runtime: Exclude<Runtime, 'all'>, projectRoot: string): Promise<boolean>**
Checks if local config directory exists (e.g., `.claude`, `.opencode`, `.gemini`) via `stat()` and `stats.isDirectory()`. Returns false if stat throws.

**isRuntimeInstalledGlobally(runtime: Exclude<Runtime, 'all'>): Promise<boolean>**
Checks if global config directory exists via `stat()` on `paths.global`. Returns false if stat throws.

**getInstalledRuntimes(projectRoot: string): Promise<Array<Exclude<Runtime, 'all'>>>**
Iterates through `getAllRuntimes()`, filters via `isRuntimeInstalledLocally()`, returns array of installed runtime identifiers.

## Environment Variable Overrides

**Claude:**
- `CLAUDE_CONFIG_DIR` overrides default `~/.claude`

**OpenCode:**
- `OPENCODE_CONFIG_DIR` highest priority
- Falls back to `XDG_CONFIG_HOME/opencode`
- Falls back to `~/.config/opencode`

**Gemini:**
- `GEMINI_CONFIG_DIR` overrides default `~/.gemini`

## Runtime Path Mappings

| Runtime | Global Default | Local Path | Settings File |
|---------|---------------|------------|---------------|
| claude | `~/.claude` | `.claude` | `~/.claude/settings.json` |
| opencode | `~/.config/opencode` | `.opencode` | `~/.config/opencode/settings.json` |
| gemini | `~/.gemini` | `.gemini` | `~/.gemini/settings.json` |

## Dependencies

Uses `node:os` for `homedir()`, `node:path` for `join()`, `node:fs/promises` for `stat()`. Imports `Runtime`, `Location`, `RuntimePaths` types from `./types.js`.