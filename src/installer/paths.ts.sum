---
generated_at: 2026-02-09T14:09:13.639Z
content_hash: 6d7cb2dc53a7e1c8f5dc0a7e8379f5404d457e928db21548a59a3117039356d3
purpose: Path resolution module providing cross-platform directory and settings file location for Claude Code, OpenCode, and G...
---
**Path resolution module providing cross-platform directory and settings file location for Claude Code, OpenCode, and Gemini runtime installation with environment variable override support.**

## Exported Functions

**`getAllRuntimes(): Array<Exclude<Runtime, 'all'>>`** — Returns array `['claude', 'opencode', 'gemini']` excluding meta-runtime `'all'`.

**`getRuntimePaths(runtime: Exclude<Runtime, 'all'>): RuntimePaths`** — Returns `RuntimePaths` object with `global` (absolute config dir), `local` (relative config dir), and `settingsFile` (absolute settings.json path) properties for specified runtime.

**`resolveInstallPath(runtime: Exclude<Runtime, 'all'>, location: Location, projectRoot?: string): string`** — Resolves absolute installation path; returns `getRuntimePaths().global` for `location === 'global'`, or joins `projectRoot` (defaults to `process.cwd()`) with `getRuntimePaths().local` for local installations.

**`getSettingsPath(runtime: Exclude<Runtime, 'all'>): string`** — Returns absolute path to settings.json file via `getRuntimePaths().settingsFile`.

**`isRuntimeInstalledLocally(runtime: Exclude<Runtime, 'all'>, projectRoot: string): Promise<boolean>`** — Checks if local config directory (`.claude`, `.opencode`, or `.gemini`) exists in `projectRoot` via `stat()` and `isDirectory()`.

**`isRuntimeInstalledGlobally(runtime: Exclude<Runtime, 'all'>): Promise<boolean>`** — Checks if global config directory exists via `stat()` on `getRuntimePaths().global`.

**`getInstalledRuntimes(projectRoot: string): Promise<Array<Exclude<Runtime, 'all'>>>`** — Iterates `getAllRuntimes()` and filters by `isRuntimeInstalledLocally()` predicate.

## Environment Variable Resolution

`getRuntimePaths()` applies environment overrides with platform-specific fallback chains:

- **Claude**: `CLAUDE_CONFIG_DIR` overrides `~/.claude`
- **OpenCode**: `OPENCODE_CONFIG_DIR` overrides `XDG_CONFIG_HOME/opencode` overrides `~/.config/opencode`
- **Gemini**: `GEMINI_CONFIG_DIR` overrides `~/.gemini`

All paths constructed via `path.join()` for cross-platform compatibility and `os.homedir()` for user directory resolution.

## Return Type Structure

`RuntimePaths` interface contains:
- `global: string` — Absolute global config directory path
- `local: string` — Relative local config directory name (`.claude`, `.opencode`, `.gemini`)
- `settingsFile: string` — Absolute path to settings.json for hook registration

## Integration Points

Consumed by `src/installer/operations.ts` for command/hook file copying and `src/installer/prompts.ts` for interactive location selection. Supports both global (`~/.claude`) and local (`.claude` in project root) installation modes required by installer workflow.