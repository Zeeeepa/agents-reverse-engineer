---
generated_at: 2026-02-09T17:45:21.138Z
content_hash: 6d7cb2dc53a7e1c8f5dc0a7e8379f5404d457e928db21548a59a3117039356d3
purpose: paths.ts resolves cross-platform installation paths for AI runtime configurations (Claude Code, OpenCode, Gemini) wit...
---
**paths.ts resolves cross-platform installation paths for AI runtime configurations (Claude Code, OpenCode, Gemini) with environment variable overrides and directory existence checks.**

## Exported Functions

**getAllRuntimes()** → `Array<Exclude<Runtime, 'all'>>`
Returns hardcoded array `['claude', 'opencode', 'gemini']` excluding the meta-runtime `'all'`.

**getRuntimePaths(runtime: Exclude<Runtime, 'all'>)** → `RuntimePaths`
Returns path configuration object with `global` (absolute path to runtime config dir), `local` (relative project-local dir name), and `settingsFile` (absolute path to settings.json). Environment overrides: `CLAUDE_CONFIG_DIR` for Claude (`~/.claude` fallback), `OPENCODE_CONFIG_DIR` or `XDG_CONFIG_HOME/opencode` for OpenCode (`~/.config/opencode` fallback), `GEMINI_CONFIG_DIR` for Gemini (`~/.gemini` fallback). Uses `os.homedir()` for home resolution and `path.join()` for cross-platform compatibility.

**resolveInstallPath(runtime, location, projectRoot?)** → `string`
Resolves absolute installation path. For `location === 'global'`, returns `getRuntimePaths(runtime).global`. For local, joins `projectRoot || process.cwd()` with local path name (`.claude`, `.opencode`, or `.gemini`).

**getSettingsPath(runtime: Exclude<Runtime, 'all'>)** → `string`
Returns `getRuntimePaths(runtime).settingsFile` absolute path. Used for hook registration in Claude Code's settings.json.

**isRuntimeInstalledLocally(runtime, projectRoot)** → `Promise<boolean>`
Checks if local config directory exists via `stat()` and `stats.isDirectory()`. Joins `projectRoot` with local path name. Returns `false` on error.

**isRuntimeInstalledGlobally(runtime)** → `Promise<boolean>`
Checks if global config directory exists via `stat()` and `stats.isDirectory()` on `getRuntimePaths(runtime).global`. Returns `false` on error.

**getInstalledRuntimes(projectRoot)** → `Promise<Array<Exclude<Runtime, 'all'>>>`
Iterates `getAllRuntimes()`, filters via `isRuntimeInstalledLocally()`, accumulates installed runtime identifiers into returned array.

## Environment Variable Overrides

- **Claude**: `CLAUDE_CONFIG_DIR` overrides `~/.claude`
- **OpenCode**: `OPENCODE_CONFIG_DIR` > `XDG_CONFIG_HOME/opencode` > `~/.config/opencode` (priority order)
- **Gemini**: `GEMINI_CONFIG_DIR` overrides `~/.gemini`

## Path Patterns

**Global paths:**
- Claude: `~/.claude` or `$CLAUDE_CONFIG_DIR`
- OpenCode: `~/.config/opencode`, `$XDG_CONFIG_HOME/opencode`, or `$OPENCODE_CONFIG_DIR`
- Gemini: `~/.gemini` or `$GEMINI_CONFIG_DIR`

**Local paths:**
- Claude: `.claude` (relative)
- OpenCode: `.opencode` (relative)
- Gemini: `.gemini` (relative)

**Settings files:**
- All runtimes: `<global_path>/settings.json`

## Dependencies

Imports `os.homedir()` for home directory resolution, `path.join()` for cross-platform path construction, `stat()` from `node:fs/promises` for directory existence checks, and `Runtime`, `Location`, `RuntimePaths` types from `./types.js`.