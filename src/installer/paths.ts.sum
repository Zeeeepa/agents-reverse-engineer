---
generated_at: 2026-02-09T21:29:24.615Z
content_hash: 6d7cb2dc53a7e1c8f5dc0a7e8379f5404d457e928db21548a59a3117039356d3
purpose: paths.ts resolves cross-platform directory paths for AI runtime installations (Claude, OpenCode, Gemini) with environ...
---
**paths.ts resolves cross-platform directory paths for AI runtime installations (Claude, OpenCode, Gemini) with environment variable overrides and local/global installation detection.**

## Exported Functions

`getAllRuntimes()` returns `Array<Exclude<Runtime, 'all'>>` containing `['claude', 'opencode', 'gemini']` as the set of concrete runtime identifiers (excludes the meta-runtime `'all'`).

`getRuntimePaths(runtime: Exclude<Runtime, 'all'>)` returns `RuntimePaths` with `global`, `local`, and `settingsFile` string paths for the specified runtime. Uses `os.homedir()` for absolute paths and `path.join()` for cross-platform compatibility. Applies environment variable overrides: `CLAUDE_CONFIG_DIR` for Claude (default `~/.claude`), `OPENCODE_CONFIG_DIR` or `XDG_CONFIG_HOME` for OpenCode (default `~/.config/opencode`), `GEMINI_CONFIG_DIR` for Gemini (default `~/.gemini`). Returns `local` paths as relative strings: `.claude`, `.opencode`, `.gemini`.

`resolveInstallPath(runtime: Exclude<Runtime, 'all'>, location: Location, projectRoot?: string)` returns absolute installation path string. For `location === 'global'`, returns `paths.global` from `getRuntimePaths()`. For local installations, joins `paths.local` with `projectRoot` (defaults to `process.cwd()` if not provided).

`getSettingsPath(runtime: Exclude<Runtime, 'all'>)` returns absolute path string to runtime settings file (`settings.json`) used for hook registration. Delegates to `getRuntimePaths(runtime).settingsFile`.

`isRuntimeInstalledLocally(runtime: Exclude<Runtime, 'all'>, projectRoot: string)` returns `Promise<boolean>` indicating whether the runtime's local config directory exists in the project. Uses `stat()` from `node:fs/promises` to check if path is directory, returns `false` on error.

`isRuntimeInstalledGlobally(runtime: Exclude<Runtime, 'all'>)` returns `Promise<boolean>` indicating whether the runtime's global config directory exists. Uses `stat()` to check `paths.global`, returns `false` on error.

`getInstalledRuntimes(projectRoot: string)` returns `Promise<Array<Exclude<Runtime, 'all'>>>` containing runtime identifiers installed locally in the project. Iterates over `getAllRuntimes()` and filters using `isRuntimeInstalledLocally()`.

## Environment Variable Precedence

Claude: `CLAUDE_CONFIG_DIR` overrides `~/.claude`.

OpenCode: `OPENCODE_CONFIG_DIR` overrides `XDG_CONFIG_HOME/opencode` which overrides `~/.config/opencode`.

Gemini: `GEMINI_CONFIG_DIR` overrides `~/.gemini`.

## Dependencies

Imports `os.homedir()` from `node:os`, `path.join()` from `node:path`, `stat()` from `node:fs/promises`. Imports `Runtime`, `Location`, `RuntimePaths` types from `./types.js`.