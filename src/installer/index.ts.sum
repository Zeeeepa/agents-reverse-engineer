---
generated_at: 2026-02-09T21:29:33.267Z
content_hash: 807d633ab0a3f34ba82995ad8707fd0c6baf723f73c6eedbd50258b6fbe3725c
purpose: Main installer entry point orchestrating npx installation workflow with interactive prompts, flag parsing, installati...
---
**Main installer entry point orchestrating npx installation workflow with interactive prompts, flag parsing, installation/uninstallation execution, and result display for ARE command/hook deployment.**

## Exported Functions

**`runInstaller(args: InstallerArgs): Promise<InstallerResult[]>`** — Main entry point executing install/uninstall workflow with interactive prompts or non-interactive flag-based mode, returns array of per-runtime installation results.

**`parseInstallerArgs(args: string[]): InstallerArgs`** — Parses command-line arguments into `InstallerArgs` structure, handles short flags (`-g`, `-l`, `-h`, `-q`) and long flags (`--global`, `--local`, `--help`, `--quiet`, `--force`, `--runtime <value>`), validates runtime against `['claude', 'opencode', 'gemini', 'all']`.

## Re-Exported Types and Functions

Re-exports from submodules: `InstallerArgs`, `InstallerResult`, `Runtime`, `Location`, `RuntimePaths`, `getRuntimePaths`, `getAllRuntimes`, `resolveInstallPath`, `getSettingsPath`, `displayBanner`, `showHelp`, `showSuccess`, `showError`, `showWarning`, `showInfo`, `showNextSteps`, `VERSION`, `selectRuntime`, `selectLocation`, `confirmAction`, `isInteractive`.

## Installation Workflow

**`runInstall(runtime: Runtime, location: Location, force: boolean, quiet: boolean): Promise<InstallerResult[]>`** — Executes installation via `installFiles()`, verifies via `verifyInstallation()` on `allCreatedFiles`, displays results unless quiet mode enabled, returns installation results array.

**`runUninstall(runtime: Runtime, location: Location, quiet: boolean): InstallerResult[]`** — Executes uninstallation via `uninstallFiles()`, deletes `.agents-reverse-engineer` config folder via `deleteConfigFolder(location, false)` for local installs, displays results unless quiet, returns uninstallation results array.

## Argument Resolution

**`determineLocation(args: InstallerArgs): Location | undefined`** — Returns `'global'` if `args.global && !args.local`, `'local'` if `args.local && !args.global`, undefined otherwise (triggers interactive prompt).

**`determineRuntimes(runtime: Runtime | undefined): Array<Exclude<Runtime, 'all'>>`** — Returns empty array if runtime undefined (needs prompt), calls `getAllRuntimes()` if runtime is `'all'`, returns single-element array `[runtime]` for specific runtimes.

## Display Functions

**`displayInstallResults(results: InstallerResult[]): void`** — Shows per-runtime success/error messages via `showSuccess()`/`showError()`, aggregates `totalCreated`/`totalSkipped`/`hooksRegistered` counts, displays summary with `showSuccess()`/`showWarning()`, calls `showNextSteps(primaryRuntime, totalCreated)`, prints GitHub docs link.

**`displayUninstallResults(results: InstallerResult[], configDeleted?: boolean): void`** — Shows per-runtime uninstall status (repurposes `filesCreated` as deleted file count, `filesSkipped` as not-found count), aggregates `totalDeleted`/`hooksUnregistered`, displays summary with config folder deletion status.

## Non-Interactive Mode Requirements

Non-interactive mode (when `!isInteractive()`) requires `--runtime` flag and either `-g`/`--global` or `-l`/`--local` flag, exits with error via `showError()` + `process.exit(1)` if missing.

## Integration Dependencies

Imports `InstallerArgs`, `InstallerResult`, `Runtime`, `Location` from `./types.js`, `getAllRuntimes`, `resolveInstallPath` from `./paths.js`, display functions from `./banner.js`, `selectRuntime`, `selectLocation`, `confirmAction`, `isInteractive` from `./prompts.js`, `installFiles`, `verifyInstallation`, `formatInstallResult` from `./operations.js`, `uninstallFiles`, `deleteConfigFolder` from `./uninstall.js`.

## Control Flow Pattern

`runInstaller()` checks `args.help` first (displays help, returns empty array), displays banner unless quiet, determines location/runtime from flags, enforces non-interactive requirements, prompts for missing values in interactive mode, branches to `runUninstall()` if `args.uninstall`, otherwise calls `runInstall()`.