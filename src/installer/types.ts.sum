---
generated_at: 2026-02-09T17:45:25.074Z
content_hash: c9618acf7084121a419590d18820c6e7d77a9bae7c6e79d26cc1b558928b4584
purpose: Defines TypeScript interfaces for npx installer workflow supporting multi-runtime installation (Claude Code, OpenCode...
---
**Defines TypeScript interfaces for npx installer workflow supporting multi-runtime installation (Claude Code, OpenCode, Gemini) with global/local location targeting, force overwrite, and result tracking.**

## Exported Types

**`Runtime`** — Union type `'claude' | 'opencode' | 'gemini' | 'all'` specifying target AI assistant runtime for installation. Maps to directory paths: `claude` → `~/.claude`, `opencode` → `~/.config/opencode`, `gemini` → `~/.gemini`, `all` → installs to all three runtimes sequentially.

**`Location`** — Union type `'global' | 'local'` controlling installation scope. `global` targets user-level directories (`~/.claude`), `local` targets project-level directories (`.claude`).

**`InstallerArgs`** — Command-line arguments interface with fields:
- `runtime?: Runtime` — Optional target runtime (if undefined, prompts interactively)
- `global: boolean` — Enable global installation flag
- `local: boolean` — Enable local installation flag
- `uninstall: boolean` — Uninstall mode flag
- `force: boolean` — Overwrite existing files without prompting
- `help: boolean` — Display help and exit
- `quiet: boolean` — Suppress banner and informational output

**`InstallerResult`** — Operation result interface with fields:
- `success: boolean` — Overall operation success status
- `runtime: Exclude<Runtime, 'all'>` — Excludes `'all'` union member, enforces single runtime per result
- `location: Location` — Installation target location
- `filesCreated: string[]` — Absolute paths of successfully written files
- `filesSkipped: string[]` — Files skipped due to pre-existence without `--force`
- `errors: string[]` — Error messages encountered during operation
- `hookRegistered?: boolean` — Optional field for Claude runtime indicating SessionStart/SessionEnd hook registration in `settings.json`
- `versionWritten?: boolean` — Optional field indicating VERSION file creation (used by update checker hooks)

**`RuntimePaths`** — Resolved path configuration interface with fields:
- `global: string` — Absolute path to global runtime directory (e.g., `~/.claude`)
- `local: string` — Absolute path to local runtime directory (e.g., `.claude`)
- `settingsFile: string` — Absolute path to runtime settings file for hook registration (e.g., `~/.claude/settings.json`)

## Type Constraints

**`Exclude<Runtime, 'all'>`** in `InstallerResult.runtime` prevents reporting aggregate results for multi-runtime installations. Enforces atomic result objects per runtime/location pair. Installer orchestrator must decompose `'all'` into separate operations yielding distinct `InstallerResult` instances for `'claude'`, `'opencode'`, `'gemini'`.

## Integration Points

Consumed by `src/installer/operations.ts` for file copying logic, `src/installer/prompts.ts` for interactive runtime selection, `src/installer/paths.ts` for directory resolution with environment variable overrides (`CLAUDE_CONFIG_DIR`, `OPENCODE_CONFIG_DIR`, `GEMINI_CONFIG_DIR`), and `src/installer/uninstall.ts` for file deletion workflow.