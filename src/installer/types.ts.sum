---
generated_at: 2026-02-09T16:10:35.915Z
content_hash: c9618acf7084121a419590d18820c6e7d77a9bae7c6e79d26cc1b558928b4584
purpose: types.ts defines TypeScript interfaces and union types for the npx installer workflow supporting multi-runtime (Claud...
---
**types.ts defines TypeScript interfaces and union types for the npx installer workflow supporting multi-runtime (Claude/OpenCode/Gemini) installation with global/local targeting, operation result tracking, and path resolution.**

## Exported Types

**Runtime** — Union type: `'claude' | 'opencode' | 'gemini' | 'all'`
- Maps to platform-specific directories: `~/.claude`, `~/.config/opencode`, `~/.gemini`
- Special value `'all'` triggers installation to all three runtimes

**Location** — Union type: `'global' | 'local'`
- `'global'` targets user-level directories (home directory)
- `'local'` targets project-level directories (working directory)

**InstallerArgs** — Interface for CLI argument parsing
```typescript
interface InstallerArgs {
  runtime?: Runtime;      // Target platform (optional, prompts if missing)
  global: boolean;        // Install to ~/.claude, ~/.config/opencode, ~/.gemini
  local: boolean;         // Install to .claude, .opencode, .gemini
  uninstall: boolean;     // Remove instead of install
  force: boolean;         // Overwrite existing files
  help: boolean;          // Show usage and exit
  quiet: boolean;         // Suppress banner/info output
}
```
Supports both interactive mode (prompts when `runtime` undefined) and non-interactive mode (all flags set).

**InstallerResult** — Interface for per-runtime operation outcomes
```typescript
interface InstallerResult {
  success: boolean;                  // Overall operation status
  runtime: Exclude<Runtime, 'all'>; // Resolved runtime (never 'all')
  location: Location;                // Target location
  filesCreated: string[];            // Successfully written file paths
  filesSkipped: string[];            // Existing files (no --force)
  errors: string[];                  // Failure messages
  hookRegistered?: boolean;          // Claude-specific: SessionEnd hook in settings.json
  versionWritten?: boolean;          // ~/.claude/ARE-VERSION existence
}
```
Used by installer operations (`src/installer/operations.ts`) for aggregated reporting.

**RuntimePaths** — Interface for resolved directory paths
```typescript
interface RuntimePaths {
  global: string;        // ~/.claude, ~/.config/opencode, ~/.gemini
  local: string;         // .claude, .opencode, .gemini
  settingsFile: string;  // settings.json path for hook registration
}
```
Environment overrides respected via `CLAUDE_CONFIG_DIR`, `OPENCODE_CONFIG_DIR`, `GEMINI_CONFIG_DIR` (see `src/installer/paths.ts`).

## Integration Points

- `src/installer/prompts.ts` constructs `InstallerArgs` from interactive prompts
- `src/installer/paths.ts` returns `RuntimePaths` for each runtime with environment variable overrides
- `src/installer/operations.ts` produces `InstallerResult[]` arrays from installation operations
- `src/installer/index.ts` consumes these types for CLI entry point orchestration

## Usage Patterns

**Parallel installation to all runtimes:**
```typescript
const results: InstallerResult[] = installToRuntime('all', 'global', args);
// Expands to three operations: claude, opencode, gemini
```

**Location precedence validation:**
```typescript
if (args.global && args.local) {
  throw new Error('Cannot specify both --global and --local');
}
```

**Path resolution with environment override:**
```typescript
const paths: RuntimePaths = getRuntimePaths('claude');
// Uses CLAUDE_CONFIG_DIR if set, else ~/.claude
```