---
generated_at: 2026-02-09T13:42:33.083Z
content_hash: a66a26ea4834a619ed367be1bd4fd149651d146da1ff6a4e56695a37aaaad999
purpose: initCommand creates `.agents-reverse-engineer/config.yaml` with defaults via `writeDefaultConfig()`, warns if `config...
---
**initCommand creates `.agents-reverse-engineer/config.yaml` with defaults via `writeDefaultConfig()`, warns if `configExists()` returns true, handles EACCES/EPERM errors by logging permission denied messages and calling `process.exit(1)`.**

## Exported Interface

```typescript
async function initCommand(root: string): Promise<void>
```

Takes `root` directory path (resolved via `path.resolve()`), constructs `configPath` by joining `resolvedRoot`, `CONFIG_DIR`, and `CONFIG_FILE` constants from `../config/loader.js`.

## Execution Flow

initCommand checks configuration existence via `configExists(resolvedRoot)` predicate. On match, logs warning with `logger.warn()` and exits early. Otherwise invokes `writeDefaultConfig(resolvedRoot)` to generate YAML file, then emits multi-line instructional output describing customizable fields: `exclude.patterns`, `ai.concurrency` (range 1-20, default auto), `ai.timeoutMs` (default 300,000ms = 5 minutes), `ai.backend` (enum: claude/gemini/opencode/auto).

## Error Handling

Catches `NodeJS.ErrnoException`, discriminates on `error.code` property. For EACCES or EPERM codes, logs permission-denied message referencing `configPath` and calls `process.exit(1)`. All other errors trigger generic failure message with `error.message` interpolation followed by `process.exit(1)`.

## Dependencies

- `path` (Node.js stdlib): `resolve()`, `join()` for path construction
- `../config/loader.js`: `configExists()`, `writeDefaultConfig()`, `CONFIG_DIR`, `CONFIG_FILE` constants
- `../output/logger.js`: `createLogger()` factory returning logger with `warn()`, `info()`, `error()` methods, initialized with `colors: true` option

## CLI Integration

Invoked by `are init` command via `src/cli/index.ts` command router. Creates `.agents-reverse-engineer/` directory tree if absent (handled by `writeDefaultConfig()` implementation in loader module).