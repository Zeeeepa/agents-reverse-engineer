---
generated_at: 2026-02-09T15:06:35.645Z
content_hash: 7cd6a59c01b8ceab118bdfa490d0f4c10459672c0146d922cdc9923c8265ccef
purpose: `src/cli/init.ts` implements the `are init` command that creates `.agents-reverse-engineer/config.yaml` with default ...
---
**`src/cli/init.ts` implements the `are init` command that creates `.agents-reverse-engineer/config.yaml` with default settings, warning if configuration already exists unless `--force` flag is provided.**

## Exported Function

**`initCommand(root: string, options?: { force?: boolean }): Promise<void>`** â€” Main entry point for `are init` command. Resolves `root` to absolute path, computes `configPath` as `<root>/.agents-reverse-engineer/config.yaml`, calls `configExists()` from `src/config/loader.ts` to check for existing config, and invokes `writeDefaultConfig()` if not present or if `force: true`. Logs instructional messages about customization options: `exclude.patterns`, `ai.concurrency`, `ai.timeoutMs`, `ai.backend`.

## Dependencies

- **`src/config/loader.ts`**: Imports `configExists()`, `writeDefaultConfig()`, `CONFIG_DIR` constant (`'.agents-reverse-engineer'`), and `CONFIG_FILE` constant (`'config.yaml'`)
- **`src/output/logger.ts`**: Imports `createLogger()` factory that returns logger with `warn()`, `info()`, `error()` methods supporting ANSI color codes when `colors: true` option passed

## Error Handling

Catches `NodeJS.ErrnoException` errors with two distinct code paths:
- **Permission errors** (`EACCES`, `EPERM`): Logs "Permission denied" message with `configPath`, suggests checking write permissions, exits with code 1
- **Other errors**: Logs generic failure message with `error.message`, exits with code 1

## CLI Output Pattern

Provides progressive disclosure of configuration options after successful initialization:
1. Confirms creation at `configPath`
2. Lists customization points with syntax: `- key: Description`
3. References README.md for full documentation

**Force flag behavior**: When `options.force` is `true`, skips `configExists()` check and unconditionally calls `writeDefaultConfig()`, allowing users to reset configuration to defaults.