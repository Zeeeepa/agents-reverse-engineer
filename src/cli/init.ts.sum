---
generated_at: 2026-02-09T16:09:46.773Z
content_hash: 7cd6a59c01b8ceab118bdfa490d0f4c10459672c0146d922cdc9923c8265ccef
purpose: initCommand() creates `.agents-reverse-engineer/config.yaml` with defaults via writeDefaultConfig(), warns if configE...
---
**initCommand() creates `.agents-reverse-engineer/config.yaml` with defaults via writeDefaultConfig(), warns if configExists() returns true, and exits on EACCES/EPERM errors.**

## Exported Interface

```typescript
async function initCommand(root: string, options?: { force?: boolean }): Promise<void>
```

Accepts `root` (resolved via `path.resolve()`) and optional `options.force` flag (default: `false`). When `force` is false and `configExists(resolvedRoot)` returns true, logs warning and skips creation. Otherwise calls `writeDefaultConfig(resolvedRoot)` to generate configuration file.

## Dependencies

- `configExists()` — Checks for existing configuration at `${root}/${CONFIG_DIR}/${CONFIG_FILE}`
- `writeDefaultConfig()` — Writes YAML config with documented defaults from `src/config/loader.ts`
- `CONFIG_DIR` — Constant `'.agents-reverse-engineer'` (config directory name)
- `CONFIG_FILE` — Constant `'config.yaml'` (config file name)
- `createLogger()` — Factory from `src/output/logger.ts` instantiated with `{ colors: true }`

## Error Handling

Catches `NodeJS.ErrnoException` and discriminates on `error.code`:

- `'EACCES'` or `'EPERM'` → Logs `"Permission denied: Cannot create ${configPath}"` with permission guidance, calls `process.exit(1)`
- Other errors → Logs `"Failed to create configuration: ${error.message}"`, calls `process.exit(1)`

## Output Messages

Success path logs:
- `"Created configuration at ${configPath}"`
- Multi-line guidance referencing `exclude.patterns`, `ai.concurrency` (range: 1-20), `ai.timeoutMs` (default: 300,000ms = 5 minutes), `ai.backend` (values: claude/gemini/opencode/auto)
- `"See README.md for full configuration reference."`

Existing config path logs:
- `"Config already exists at ${configPath}"`
- `"Edit the file to customize exclusions and options."`

## File System Operations

Constructs config path via `path.join(resolvedRoot, CONFIG_DIR, CONFIG_FILE)` where:
- `CONFIG_DIR` = `'.agents-reverse-engineer'`
- `CONFIG_FILE` = `'config.yaml'`

Example resolved path: `${resolvedRoot}/.agents-reverse-engineer/config.yaml`