---
generated_at: 2026-02-09T21:28:34.577Z
content_hash: 7cd6a59c01b8ceab118bdfa490d0f4c10459672c0146d922cdc9923c8265ccef
purpose: initCommand() creates `.agents-reverse-engineer/config.yaml` with documented defaults, warning if configuration alrea...
---
**initCommand() creates `.agents-reverse-engineer/config.yaml` with documented defaults, warning if configuration already exists unless `--force` overrides.**

## Exported Interface

```typescript
async function initCommand(
  root: string,
  options?: { force?: boolean }
): Promise<void>
```

Resolves `root` to absolute path via `path.resolve()`, constructs `configPath` by joining `resolvedRoot`, `CONFIG_DIR`, and `CONFIG_FILE` constants from `../config/loader.js`. Checks existence via `configExists(resolvedRoot)` unless `options?.force` is true. Writes default configuration via `writeDefaultConfig(resolvedRoot)` when config missing or force flag set.

## Logger Integration

Creates logger via `createLogger({ colors: true })` for all output. Emits `logger.warn()` when config exists without force flag, `logger.info()` for creation success with customization instructions, `logger.error()` for failures.

## Error Handling Strategy

Catches `NodeJS.ErrnoException` and matches `error.code`:
- `'EACCES'` or `'EPERM'` → logs permission denied message, suggests checking write permissions, calls `process.exit(1)`
- Other codes → logs generic failure with `error.message`, calls `process.exit(1)`

## User Guidance Messages

On successful creation, emits configuration customization instructions via `logger.info()`:
- `exclude.patterns` — custom glob patterns to exclude
- `ai.concurrency` — parallel AI calls (1-20, default: auto)
- `ai.timeoutMs` — subprocess timeout (default: 300,000ms = 5 min)
- `ai.backend` — AI backend (claude/gemini/opencode/auto)
- Final line references `README.md` for full configuration reference

## Dependencies

Imports `configExists`, `writeDefaultConfig`, `CONFIG_DIR`, `CONFIG_FILE` from `../config/loader.js` for config file operations. Imports `createLogger` from `../output/logger.js` for terminal output with picocolors formatting.