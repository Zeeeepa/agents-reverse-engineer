<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Incremental Updates: Keep Docs Fresh Without Regenerating Everything — ARE Blog</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

<link href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400;0,600;1,400&family=Source+Sans+3:wght@400;600&display=swap" rel="stylesheet">
<style>
  * { margin:0; padding:0; box-sizing:border-box; }
  body {
    background: #f5f0e8;
    background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23a89060' fill-opacity='0.05'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
    color: #3d3229;
    font-family: 'Lora', Georgia, serif;
    font-size: 17px;
    line-height: 1.8;
  }
  article {
    max-width: 700px;
    margin: 0 auto;
    padding: 50px 24px 80px;
  }
  h1 {
    font-size: 36px;
    font-weight: 600;
    color: #2d5016;
    margin-bottom: 16px;
    line-height: 1.25;
  }
  h1::first-letter {
    font-size: 52px;
    float: left;
    margin-right: 8px;
    line-height: 1;
    color: #4a7c59;
  }
  h2 {
    font-family: 'Source Sans 3', sans-serif;
    font-size: 22px;
    color: #4a7c59;
    margin: 40px 0 14px;
    padding-bottom: 8px;
    border-bottom: 2px solid #c5d8b0;
  }
  h3 {
    font-size: 18px;
    color: #5a8a5a;
    margin: 28px 0 10px;
  }
  p { margin: 14px 0; }
  a { color: #4a7c59; text-decoration: none; border-bottom: 1px solid #9bb88d; }
  a:hover { color: #2d5016; border-color: #4a7c59; }
  code {
    background: #e8e0d0;
    border: 1px solid #d4c8b0;
    padding: 2px 6px;
    border-radius: 4px;
    font-size: 15px;
    color: #5a4a38;
  }
  pre {
    background: #ede7db;
    border: 1px solid #d4c8b0;
    padding: 18px;
    border-radius: 8px;
    overflow-x: auto;
    margin: 18px 0;
  }
  pre code { background: none; border: none; padding: 0; }
  ul, ol { padding-left: 24px; margin: 14px 0; }
  li { margin: 8px 0; }
  li::marker { color: #4a7c59; }
  strong { color: #2d5016; }
  em { color: #5a8a5a; }
  hr { border: none; height: 3px; background: linear-gradient(90deg, transparent, #c5d8b0, transparent); margin: 32px 0; }
  blockquote {
    border-left: 4px solid #4a7c59;
    padding: 10px 18px;
    margin: 18px 0;
    background: rgba(74,124,89,0.06);
    font-style: italic;
  }
</style>
</head>
<body>
<style>
.are-nav{position:sticky;top:0;z-index:100;display:flex;align-items:center;padding:10px 20px;background:rgba(255,255,255,0.95);backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);border-bottom:1px solid rgba(0,0,0,0.08);font-family:system-ui,-apple-system,sans-serif}
.are-nav-side{flex:1;min-width:0}
.are-nav-center{display:flex;align-items:center;gap:6px}
.are-nav-btn{display:inline-flex;align-items:center;padding:6px 14px;border-radius:8px;text-decoration:none;font-size:13px;font-weight:500;color:#333;background:rgba(0,0,0,0.05);border:1px solid rgba(0,0,0,0.1);transition:background 0.15s;position:relative;cursor:pointer;white-space:nowrap}
.are-nav-btn:hover{background:rgba(0,0,0,0.1)}
.are-nav-btn.is-disabled{opacity:0.25;pointer-events:none}
.are-nav-count{color:#333;opacity:0.5;font-size:12px;font-weight:500;padding:0 6px;font-family:system-ui,sans-serif}
.are-nav-btn[data-tip]:hover::after{content:attr(data-tip);position:absolute;top:calc(100% + 8px);left:50%;transform:translateX(-50%);padding:5px 10px;border-radius:6px;font-size:11px;font-weight:400;white-space:nowrap;background:#333;color:#fff;pointer-events:none;z-index:200;box-shadow:0 2px 8px rgba(0,0,0,0.25)}
.are-nav-btn[data-tip]:hover::before{content:'';position:absolute;top:calc(100% + 2px);left:50%;transform:translateX(-50%);border:5px solid transparent;border-bottom-color:#333;pointer-events:none;z-index:200}
</style>
<nav class="are-nav">
  <div class="are-nav-side"><a href="index.html" class="are-nav-btn">← All Articles</a></div>
  <div class="are-nav-center">
    <a href="04.html" class="are-nav-btn" data-tip="The Two-Phase Pipeline: How ARE Understands Your Codebase">← Prev</a>
    <span class="are-nav-count">05 / 12</span>
    <a href="06.html" class="are-nav-btn" data-tip="Multi-Runtime Support: Claude Code, Gemini CLI, OpenCode, and Codex">Next →</a>
  </div>
  <div class="are-nav-side"></div>
</nav>
<style>
.are-blur-wrap{filter:blur(5px);pointer-events:none;user-select:none}
.are-coming-soon-banner{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);z-index:50;background:rgba(10,10,20,0.93);backdrop-filter:blur(12px);color:#fff;padding:28px 48px;border-radius:14px;font-family:system-ui,-apple-system,sans-serif;text-align:center;pointer-events:auto;border:1px solid rgba(255,255,255,0.1);box-shadow:0 8px 32px rgba(0,0,0,0.4)}
.are-coming-soon-banner h2{font-size:24px;font-weight:700;margin-bottom:8px;color:#fff}
.are-coming-soon-banner p{font-size:14px;color:rgba(255,255,255,0.75);margin:0}
</style>
<div class="are-coming-soon-banner"><h2>Coming Soon</h2><p>This article is not yet available</p></div>
<div class="are-blur-wrap">
<article><h1>Incremental Updates: Keep Docs Fresh Without Regenerating Everything</h1>
<p>Your codebase evolves daily. Each change potentially invalidates documentation. Regenerating everything from scratch wastes time and API calls.</p>
<p>The agents-reverse-engineer (ARE) update system detects what changed and regenerates only what&#39;s needed.</p>
<h2>The Update Command</h2>
<pre><code class="language-bash">npx agents-reverse-engineer update
</code></pre>
<p>The update command:</p>
<ol>
<li>Scans existing <code>.sum</code> files to detect which source files changed</li>
<li>Regenerates documentation for changed files (Phase 1)</li>
<li>Propagates changes up the directory tree by regenerating affected <code>AGENTS.md</code> files (Phase 2)</li>
<li>Cleans up orphaned documentation for deleted files</li>
</ol>
<p>This selective regeneration is orders of magnitude faster than a full <code>are generate</code> run.</p>
<h2>How Change Detection Works</h2>
<p>Every <code>.sum</code> file contains YAML frontmatter with a <code>content_hash</code> — a SHA-256 digest of the source file. When you run <code>are update</code>:</p>
<ol>
<li>Reads existing frontmatter from all <code>.sum</code> files</li>
<li>Computes current SHA-256 hashes for each source file</li>
<li>Compares stored versus current hashes</li>
<li>Regenerates only files where hashes don&#39;t match</li>
</ol>
<p>This doesn&#39;t rely on timestamps (unreliable with git) or git diffs (requiring a repo). It works purely on content — if bytes changed, docs get updated.</p>
<h2>Directory Propagation</h2>
<p>When a file&#39;s documentation changes, parent <code>AGENTS.md</code> files need updating too. ARE collects all ancestor directories, sorts by depth descending, and regenerates each sequentially.</p>
<h2>Orphan Cleanup</h2>
<p>When files get deleted, <code>cleanupOrphans()</code> removes their <code>.sum</code> and <code>.annex.sum</code> files. If a directory has no remaining source files, its <code>AGENTS.md</code> is also removed.</p>
<h2>The --uncommitted Flag</h2>
<pre><code class="language-bash">are update --uncommitted
</code></pre>
<p>Filters to only files <code>git status</code> reports as modified. Useful during active development to preview documentation changes before committing.</p>
<h2>Automatic Updates with Session Hooks</h2>
<p>The <code>are-session-end.js</code> hook runs when your AI session ends, checks for git changes, and runs <code>are update --quiet</code> in the background using detached spawning. Disable via <code>ARE_DISABLE_HOOK=1</code> or <code>hook_enabled: false</code> in config.</p>
<h2>Best Practices</h2>
<ol>
<li>Run updates after merging feature branches</li>
<li>Enable session hooks for automatic maintenance</li>
<li>Periodically run full regeneration (<code>are generate --force</code>)</li>
<li>Use --uncommitted during active development</li>
</ol>
</article>
</div>
</body>
</html>