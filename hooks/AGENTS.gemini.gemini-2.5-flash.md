<!-- Generated by agents-reverse-engineer v1.0.1 -->

# hooks
The `hooks` directory contains JavaScript files that extend the functionality of the `agents-reverse-engineer` CLI, primarily for update checks and context loading for AI agents.

## Contents
*   [are-check-update.js](./are-check-update.js): Performs background `agents-reverse-engineer` update checks by `spawn`ing a detached Node.js process, comparing `installed` and `latest` versions, and caching `{ update_available, installed, latest, checked }`.
*   [are-context-loader.js](./are-context-loader.js): Augments Claude's `additionalContext` with `AGENTS.md` content from parent directories after a `Read` tool call, managing deduplication by `session_id`.
*   [opencode-are-check-update.js](./opencode-are-check-update.js): Implements an OpenCode hook, `AreCheckUpdate`, to perform `agents-reverse-engineer` (ARE) update checks, triggered on `event.type === 'session.created'`.

## Behavioral Contracts
*   `are-check-update.js` uses `projectVersionFile` (`.claude/ARE-VERSION`), `globalVersionFile` (`~/.claude/ARE-VERSION`), `cacheFile` (`~/.claude/cache/are-update-check.json`), `cacheDir` (`~/.claude/cache`), and `npmCacheDir`. The `npm` command executed is `npm view agents-reverse-engineer version`.
*   `are-context-loader.js` prefixes `additionalContext` with `## ARE Context: <relDir>/AGENTS.md\n\n`. Deduplication state is written to `os.tmpdir()/are-context-loader/<sessionId>.json`. `AGENTS.md` content must include `'Generated by agents-reverse-engineer'` to be considered.
*   `opencode-are-check-update.js` uses cache file path `os.homedir()/.config/opencode/cache/are-update-check.json`. The `npm` command is `npm view agents-reverse-engineer version`. The cache JSON structure is `{ update_available: boolean, installed: string, latest: string | 'unknown', checked: number }`. The version file name is `ARE-VERSION`. Activation requires `event.type === 'session.created'`. The `installed` ARE version is read from `process.cwd()/.opencode/ARE-VERSION` then `os.homedir()/.config/opencode/ARE-VERSION`.