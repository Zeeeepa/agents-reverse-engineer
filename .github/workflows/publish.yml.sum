---
generated_at: 2026-02-09T16:09:16.409Z
content_hash: 75ab86d0c3fb58954b283b3a7d7248f50fb838f608dd6f39ab0db505acb7d4c8
purpose: GitHub Actions workflow automating npm package publication with Sigstore provenance attestation on release events.
---
**GitHub Actions workflow automating npm package publication with Sigstore provenance attestation on release events.**

## Workflow Triggers

Executes on two event patterns:
- `release[published]` event when GitHub release published
- `workflow_dispatch` for manual triggering via Actions UI

## Job Configuration

`publish` job runs on `ubuntu-latest` with permission grants:
- `contents: read` — checkout repository access
- `id-token: write` — enables Sigstore-signed provenance generation

## Build Pipeline Steps

**Checkout Step:**
- `actions/checkout@v4` clones repository at release commit SHA

**Node.js Setup:**
- `actions/setup-node@v4` installs Node.js version 20
- Configures npm registry URL as `https://registry.npmjs.org` via `registry-url` parameter

**Dependency Installation:**
- `npm ci` performs clean install from package-lock.json

**Build Execution:**
- `npm run build` invokes TypeScript compilation and hook copying (triggers `prepublishOnly` script: `tsc` + `build:hooks` from `scripts/build-hooks.js`)

**Publication:**
- `npm publish --provenance --access public` publishes package with cryptographic attestation
- `--provenance` flag generates Sigstore-signed build provenance linking published tarball to source commit SHA via SLSA attestation
- `--access public` ensures scoped package visibility
- `NODE_AUTH_TOKEN` environment variable sourced from `secrets.NPM_TOKEN` repository secret for npm registry authentication

## Security Features

Cryptographic provenance attestation creates verifiable supply chain metadata:
- Links published artifact to GitHub Actions workflow execution
- Records commit SHA, workflow file path, repository coordinates
- Signed via Sigstore's keyless signing using GitHub's OIDC token
- Consumers verify authenticity via `npm audit signatures` or `sigstore-js` tooling