---
generated_at: 2026-02-09T21:28:07.912Z
content_hash: 75ab86d0c3fb58954b283b3a7d7248f50fb838f608dd6f39ab0db505acb7d4c8
purpose: GitHub Actions workflow automating npm package publication with Sigstore-signed provenance attestation on release eve...
---
**GitHub Actions workflow automating npm package publication with Sigstore-signed provenance attestation on release events.**

## Workflow Triggers

Executes on `release[published]` GitHub events and manual `workflow_dispatch` invocation.

## Job Configuration

Single `publish` job runs on `ubuntu-latest` with permissions `contents: read` and `id-token: write` (enables OIDC authentication for provenance signing).

## Build and Publish Steps

Executes `actions/checkout@v4` to clone repository, then `actions/setup-node@v4` with `node-version: '20'` and `registry-url: 'https://registry.npmjs.org'` to configure npm registry authentication.

Runs `npm ci` for dependency installation (clean install from lockfile), then `npm run build` invoking TypeScript compilation via `tsc` and hook copying via `build:hooks` script (triggered through `prepublishOnly` lifecycle hook).

Executes `npm publish --provenance --access public` with `NODE_AUTH_TOKEN: ${{ secrets.NPM_TOKEN }}` environment variable for registry authentication. The `--provenance` flag generates Sigstore-signed attestation linking published tarball to source commit SHA via GitHub's OIDC provider, creating cryptographic proof of build integrity recorded in Sigstore's public transparency log. The `--access public` flag ensures package visibility on npm registry.

## Integration with Project Build System

Depends on `prepublishOnly` script in `package.json` executing `npm run build && npm run build:hooks`, which compiles `src/` to `dist/` via TypeScript compiler and copies `hooks/` directory to `hooks/dist/` for npm tarball inclusion via `scripts/build-hooks.js`.

## Security Model

Uses GitHub Actions secrets (`NPM_TOKEN`) for npm registry write access and GitHub's native OIDC identity provider (`id-token: write` permission) for provenance attestation without requiring long-lived signing keys.