---
generated_at: 2026-02-09T17:44:17.085Z
content_hash: 75ab86d0c3fb58954b283b3a7d7248f50fb838f608dd6f39ab0db505acb7d4c8
purpose: GitHub Actions workflow automating npm package publication with Sigstore provenance attestation on release events or ...
---
**GitHub Actions workflow automating npm package publication with Sigstore provenance attestation on release events or manual dispatch.**

## Workflow Triggers

Activates on two GitHub event types:
- `release` with `types: [published]` when GitHub release is published
- `workflow_dispatch` for manual execution via GitHub UI

## Job Configuration

`publish` job runs on `ubuntu-latest` with two permissions:
- `contents: read` for repository checkout
- `id-token: write` enabling OIDC token generation for Sigstore provenance signing

## Build Steps

Executes five sequential steps:

1. **Checkout** via `actions/checkout@v4` clones repository at triggered commit SHA
2. **Setup Node.js** via `actions/setup-node@v4` with `node-version: '20'` and `registry-url: 'https://registry.npmjs.org'` configuring npm authentication context
3. **Install dependencies** via `npm ci` performing clean install from `package-lock.json`
4. **Build** via `npm run build` invoking `prepublishOnly` script executing `tsc` TypeScript compilation and `build:hooks` hook file copying
5. **Publish to npm** via `npm publish --provenance --access public` with `NODE_AUTH_TOKEN` from GitHub secret `NPM_TOKEN`

## Provenance Attestation

`--provenance` flag generates cryptographic attestation linking published npm package to source commit SHA via Sigstore transparency log, requires `id-token: write` permission for OIDC token exchange.

## Access Control

`--access public` flag ensures scoped package `agents-reverse-engineer` publishes with public visibility on npm registry.

## Environment Variables

`NODE_AUTH_TOKEN` set from GitHub secret `secrets.NPM_TOKEN` authenticates npm publish operation via `.npmrc` configuration injected by `actions/setup-node`.