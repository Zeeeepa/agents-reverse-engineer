<!-- Generated by agents-reverse-engineer v1.0.1 -->

# .github/workflows

The `.github/workflows` directory defines GitHub Actions CI/CD automation for publishing the static blog site to GitHub Pages and releasing npm packages with provenance attestation.

## Contents

- [`pages.yml`](./pages.yml): Deploys static site from `site` directory to GitHub Pages on push to `main` (when `site/**` or `blog/**` change) or manual `workflow_dispatch`, using `actions/checkout@v4`, `actions/setup-node@v4`, `npm ci`, `node site/build.mjs`, `actions/upload-pages-artifact@v3`, and `actions/deploy-pages@v4`.
- [`publish.yml`](./publish.yml): Publishes package to npm on `release.types: [published]` or `workflow_dispatch`, executing `npm ci`, `npm run build`, `npm publish --provenance --access public` with `NODE_AUTH_TOKEN: ${{ secrets.NPM_TOKEN }}`.

## Workflow Triggers

- **pages.yml**: `push.branches: [main]` with `paths: [site/**, blog/**]`, or `workflow_dispatch`
- **publish.yml**: `release.types: [published]`, or `workflow_dispatch`

## Permissions

- **pages.yml**: `contents: read`, `pages: write`, `id-token: write`
- **publish.yml**: `contents: read`, `id-token: write` (for npm provenance)

## Concurrency

`pages.yml` uses `group: pages` with `cancel-in-progress: true` to prevent overlapping deployments.

## Workflow & Conventions

- **pages.yml** runs `build` job on `ubuntu-latest` (checkout, Node 20 setup, `npm ci`, `node site/build.mjs`, artifact upload), then `deploy` job in `github-pages` environment.
- **publish.yml** runs single `publish` job on `ubuntu-latest` (checkout, Node 20 setup with npm registry, `npm ci`, `npm run build`, `npm publish --provenance --access public`).
- Both workflows use GitHub Actions v4 (`actions/checkout@v4`, `actions/setup-node@v4`).
- `publish.yml` requires `NPM_TOKEN` secret for authentication.