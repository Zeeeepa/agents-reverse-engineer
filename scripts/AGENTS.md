<!-- Generated by agents-reverse-engineer -->

# scripts

Build automation scripts for npm lifecycle hooks, prepublishOnly hook asset preparation, and distribution artifact generation.

## Contents

### [build-hooks.js](./build-hooks.js)
Copies hook source files from `hooks/` to `hooks/dist/` during `prepublishOnly` lifecycle. Filters `.js` files via `readdirSync()` + `endsWith('.js')` predicate, excludes `dist` directory itself, creates target via `mkdirSync(HOOKS_DIST, { recursive: true })`, performs per-file `copyFileSync()` from `HOOKS_SRC` to `HOOKS_DIST`. Invoked by `package.json` `prepublishOnly` script chain (`npm run build && npm run build:hooks`). Ensures session lifecycle hooks (are-check-update.js, are-session-end.js, opencode-are-check-update.js, opencode-are-session-end.js) exist in npm tarball for installer/operations.ts reference during global/local hook installation.

## Integration Points

**Package.json lifecycle:**
- `prepublishOnly` script executes `npm run build:hooks` â†’ invokes build-hooks.js
- Runs after TypeScript compilation (`npm run build`) before `npm publish`
- Ensures hooks/dist/ directory populated for tarball inclusion

**Hook installation workflow:**
- `src/installer/operations.ts` references hooks/dist/ files during `installCommands()` execution
- Supports both global (`~/.claude/hooks/`) and local (`.claude/hooks/`) installation modes
- Platform-specific targets: Claude Code, OpenCode, Gemini via runtime detection

**File resolution:**
- Computes `projectRoot` via `fileURLToPath(import.meta.url)` + double `dirname()` traversal
- Resolves absolute paths via `join(projectRoot, 'hooks')` and `join(projectRoot, 'hooks', 'dist')`
- Prevents relative path ambiguity in npm lifecycle context